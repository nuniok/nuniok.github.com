<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)">
<meta name="generator" content="Hexo 7.2.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/resource/img/fav2024.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/resource/img/fav2024.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/resource/img/fav2024.png">
  <link rel="mask-icon" href="/resource/img/fav2024.png" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"noge.top","root":"/","images":"/images","scheme":"Pisces","darkmode":true,"version":"8.8.2","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2929408904388376" crossorigin="anonymous"></script><meta property="og:type" content="website">
<meta property="og:title" content="码力欧">
<meta property="og:url" content="https://noge.top/page/10/index.html">
<meta property="og:site_name" content="码力欧">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="nuniok">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://noge.top/page/10/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/10/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>码力欧</title>
  

  <script src="/js/third-party/analytics/baidu-analytics.js"></script>
  <script async src="https://hm.baidu.com/hm.js?9cdc9a11cbd242c6336b07c464d8820c"></script>



  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">码力欧</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">瞎折腾</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="home fa-fw"></i>首页</a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="archive fa-fw"></i>归档</a></li>
        <li class="menu-item menu-item-future"><a href="/future/" rel="section"><i class="sitemap fa-fw"></i>├ 动态</a></li>
        <li class="menu-item menu-item-nas"><a href="/nas/" rel="section"><i class="sitemap fa-fw"></i>├ NAS</a></li>
        <li class="menu-item menu-item-life"><a href="/life/" rel="section"><i class="sitemap fa-fw"></i>├ 生活</a></li>
        <li class="menu-item menu-item-career"><a href="/career/" rel="section"><i class="sitemap fa-fw"></i>└ 技术</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="tags fa-fw"></i>标签</a></li>
        <li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="user fa-fw"></i>关于</a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">nuniok</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">101</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">86</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/nuniok" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;nuniok" rel="noopener" target="_blank"><i class="github fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:nuniok@163.com" title="E-Mail → mailto:nuniok@163.com" rel="noopener" target="_blank"><i class="envelope fa-fw"></i></a>
      </span>
  </div>



        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="返回顶部">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="reading-progress-bar"></div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://noge.top/2015/06/12/1.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="nuniok">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="码力欧">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2015/06/12/1.html" class="post-title-link" itemprop="url">Crontab计划任务</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2015-06-12 00:00:00" itemprop="dateCreated datePublished" datetime="2015-06-12T00:00:00+00:00">2015-06-12</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>编辑 Crontab 文件： <code>crontab -e</code></p>
<p>查看 Crontab 日志： <code>tail -100f /var/log/cron</code></p>
<p>基本格式 :</p>
<p><img src="/resource/img/crontab.png" alt="Crontab"></p>
<p><code>*　　*　　*　　*　　*　　command</code></p>
<p>分　时　日　月　周　命令</p>
<p>第1列表示分钟1～59 每分钟用*或者 *&#x2F;1表示<br>第2列表示小时1～23（0表示0点）<br>第3列表示日期1～31<br>第4列表示月份1～12<br>第5列标识号星期0～6（0表示星期天）<br>第6列要运行的命令</p>
<h2 id="Crontab文件的一些例子："><a href="#Crontab文件的一些例子：" class="headerlink" title="Crontab文件的一些例子："></a>Crontab文件的一些例子：</h2><p><code>30 21 * * * /usr/local/etc/rc.d/lighttpd restart</code><br>上面的例子表示每晚的21:30重启apache</p>
<p><code>45 4 1,10,22 * * /usr/local/etc/rc.d/lighttpd restart</code><br>上面的例子表示每月1、10、22日的4 : 45重启apache</p>
<p><code>10 1 * * 6,0 /usr/local/etc/rc.d/lighttpd restart</code><br>上面的例子表示每周六、周日的1 : 10重启apache</p>
<p><code>0,30 18-23 * * * /usr/local/etc/rc.d/lighttpd restart</code><br>上面的例子表示在每天18 : 00至23 : 00之间每隔30分钟重启apache</p>
<p><code>0 23 * * 6 /usr/local/etc/rc.d/lighttpd restart</code><br>上面的例子表示每星期六的11 : 00 pm重启apache</p>
<p><code>* */1 * * * /usr/local/etc/rc.d/lighttpd restart</code><br>每一小时重启apache</p>
<p><code>* 23-7/1 * * * /usr/local/etc/rc.d/lighttpd restart</code><br>晚上11点到早上7点之间，每隔一小时重启apache</p>
<p><code>0 11 4 * mon-wed /usr/local/etc/rc.d/lighttpd restart</code><br>每月的4号与每周一到周三的11点重启apache</p>
<p><code>0 4 1 jan * /usr/local/etc/rc.d/lighttpd restart</code><br>一月一号的4点重启apache</p>
<h2 id="遇到的坑"><a href="#遇到的坑" class="headerlink" title="遇到的坑"></a>遇到的坑</h2><p><code>* 1 * * *</code> 这样写的话会每天1点的每分钟执行一次，需要写成 <code>0 1 * * *</code> 这样的形式</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://noge.top/2015/05/28/1.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="nuniok">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="码力欧">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2015/05/28/1.html" class="post-title-link" itemprop="url">Tornado学习总结</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2015-05-28 00:00:00" itemprop="dateCreated datePublished" datetime="2015-05-28T00:00:00+00:00">2015-05-28</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="框架"><a href="#框架" class="headerlink" title="框架"></a>框架</h2><p><img src="/resource/img/Tornado/tornado1.png" alt="原始图像"></p>
<h2 id="四层"><a href="#四层" class="headerlink" title="四层"></a>四层</h2><ul>
<li>WEB框架（处理器、模板、数据库连接、认证、本地化等）</li>
<li>HTTP&#x2F;HTTPS层（基于HTTP协议实现了HTTP服务器和客户端）</li>
<li>TCP层（TCP服务器，负责数据传输）</li>
<li>EVENT层（处理IO事件）</li>
</ul>
<p>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</p>
<h2 id="基础用法学习"><a href="#基础用法学习" class="headerlink" title="基础用法学习"></a>基础用法学习</h2><h3 id="请求处理程序和请求参数"><a href="#请求处理程序和请求参数" class="headerlink" title="请求处理程序和请求参数"></a>请求处理程序和请求参数</h3><p>程序将URL映射到tornado.web.RequestHandler的子类上去。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MainHandler</span>(tornado.web.RequestHandler):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get</span>(<span class="params">self</span>):</span><br><span class="line">        self.write(<span class="string">&quot;You requested the main page&quot;</span>)</span><br><span class="line"> </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">StoryHandler</span>(tornado.web.RequestHandler):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get</span>(<span class="params">self, story_id</span>):</span><br><span class="line">        self.write(<span class="string">&quot;You requested the story &quot;</span> + story_id)</span><br><span class="line"> </span><br><span class="line">application = tornado.web.Application([</span><br><span class="line">    (<span class="string">r&quot;/&quot;</span>, MainHandler),</span><br><span class="line">    (<span class="string">r&quot;/story/([0-9]+)&quot;</span>, StoryHandler),</span><br><span class="line">])</span><br></pre></td></tr></table></figure>
<p><code>get_argument()</code> 方法获取查询字符串参数。<br><code>self.request.files</code> 可以访问上传文件。<br><img src="/resource/img/Tornado/tornado2.png" alt="原始图像"></p>
<p>在继承类中通过 self.request.arguments.items() 方法获取所有返回对象。</p>
<h3 id="重写RequestHandler的方法函数"><a href="#重写RequestHandler的方法函数" class="headerlink" title="重写RequestHandler的方法函数"></a>重写RequestHandler的方法函数</h3><p>程序调用 initialize() 函数，这个函数的参数是 Application 配置中的关键字 参数定义。initialize 方法一般只是把传入的参数存 到成员变量中，而不会产生一些输出或者调用像 send_error 之类的方法。<br>程序调用 prepare()。无论使用了哪种 HTTP 方法，prepare 都会被调用到，因此 这个方法通常会被定义在一个基类中，然后在子类中重用。prepare可以产生输出 信息。如果它调用了finish（或send_error&#96; 等函数），那么整个处理流程 就此结束。<br>程序调用某个 HTTP 方法：例如 get()、post()、put() 等。如果 URL 的正则表达式模式中有分组匹配，那么相关匹配会作为参数传入方法，见下图：<br><img src="/resource/img/Tornado/tornado3.png" alt="原始图像"></p>
<p>见 code 1，RequestHandler中一些方法函数需要在其子类中重新定义<code>handler\base.py</code><br><img src="/resource/img/Tornado/tornado4.png" alt="原始图像"></p>
<p><code>get_current_user()</code> 处理获得当前用户</p>
<h3 id="重定向"><a href="#重定向" class="headerlink" title="重定向"></a>重定向</h3><p>通过 <code>self.redirect</code> 或 <code>RedirectHandler </code>。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">application = tornado.wsgi.WSGIApplication([</span><br><span class="line">    (<span class="string">r&quot;/([a-z]*)&quot;</span>, ContentHandler),</span><br><span class="line">    (<span class="string">r&quot;/static/tornado-0.2.tar.gz&quot;</span>, tornado.web.RedirectHandler,</span><br><span class="line">     <span class="built_in">dict</span>(url=<span class="string">&quot;http://github.com/downloads/facebook/tornado/tornado-0.2.tar.gz&quot;</span>)),</span><br><span class="line">], **settings)</span><br></pre></td></tr></table></figure>

<h3 id="模板"><a href="#模板" class="headerlink" title="模板"></a>模板</h3><p>模板支持 <code>&#123; % 控制语句 % &#125;</code>、<code>&#123; &#123; 表达式 &#125; &#125;</code><br>可以通过 extends 和 block 实现模板继承。</p>
<h3 id="Cookie和Cookie安全"><a href="#Cookie和Cookie安全" class="headerlink" title="Cookie和Cookie安全"></a>Cookie和Cookie安全</h3><p>通过下面方式加强安全性</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MainHandler</span>(tornado.web.RequestHandler):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> self.get_secure_cookie(<span class="string">&quot;mycookie&quot;</span>):</span><br><span class="line">            self.set_secure_cookie(<span class="string">&quot;mycookie&quot;</span>, <span class="string">&quot;myvalue&quot;</span>)</span><br><span class="line">            self.write(<span class="string">&quot;Your cookie was not set yet!&quot;</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            self.write(<span class="string">&quot;Your cookie was set!&quot;</span>)</span><br><span class="line"> </span><br><span class="line">application = tornado.web.Application([</span><br><span class="line">    (<span class="string">r&quot;/&quot;</span>, MainHandler),</span><br><span class="line">], cookie_secret=<span class="string">&quot;61oaBcAaaXQAGaYdkL5gEmGeJJFuYh7EQnp2XdTP1o/Vo=&quot;</span>)</span><br></pre></td></tr></table></figure>
<p>另一种配置写法：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MainHandler</span>(<span class="title class_ inherited__">BaseHandler</span>):</span><br><span class="line"><span class="meta">    @tornado.web.authenticated</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get</span>(<span class="params">self</span>):</span><br><span class="line">        name = tornado.escape.xhtml_escape(self.current_user)</span><br><span class="line">        self.write(<span class="string">&quot;Hello, &quot;</span> + name)</span><br><span class="line"> </span><br><span class="line">settings = &#123;</span><br><span class="line">    <span class="string">&quot;cookie_secret&quot;</span>: <span class="string">&quot;61oaBcAaaXQAGaYdkL5gEmGeJJFuYh7EQnp2XdTP1o/Vo=&quot;</span>,</span><br><span class="line">    <span class="string">&quot;login_url&quot;</span>: <span class="string">&quot;/login&quot;</span>,</span><br><span class="line">&#125;</span><br><span class="line">application = tornado.web.Application([</span><br><span class="line">    (<span class="string">r&quot;/&quot;</span>, MainHandler),</span><br><span class="line">    (<span class="string">r&quot;/login&quot;</span>, LoginHandler),</span><br><span class="line">], **settings)</span><br></pre></td></tr></table></figure>
<p><code>@tornado.web.authenticated</code> 用于用户认证<br><code>cookie_secret</code>用于加密cookie<br><code>login_url</code> 记录重定向地址<br><code>xsrf_cookies</code> 开关XSRF防范机制<br><img src="/resource/img/Tornado/tornado5.png" alt="原始图像"></p>
<h3 id="静态文件和主动式文件缓存"><a href="#静态文件和主动式文件缓存" class="headerlink" title="静态文件和主动式文件缓存"></a>静态文件和主动式文件缓存</h3><p><code>&quot;static_path&quot;: os.path.join(os.path.dirname(__file__), &quot;static&quot;)</code><br>static_url() 函数会将相对地址转成一个类似于 &#x2F;static&#x2F;images&#x2F;logo.png?v&#x3D;aae54 的 URI，v 参数是 logo.png 文件的散列值， Tornado 服务器会把它发给浏览器，并以此为依据让浏览器对相关内容做永久缓存。<br>由于 v 的值是基于文件的内容计算出来的，如果你更新了文件，或者重启了服务器 ，那么就会得到一个新的 v 值，这样浏览器就会请求服务器以获取新的文件内容。 如果文件的内容没有改变，浏览器就会一直使用本地缓存的文件，这样可以显著提高页 面的渲染速度。</p>
<h3 id="本地化"><a href="#本地化" class="headerlink" title="本地化"></a>本地化</h3><h3 id="UI模块"><a href="#UI模块" class="headerlink" title="UI模块"></a>UI模块</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">HomeHandler</span>(tornado.web.RequestHandler):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get</span>(<span class="params">self</span>):</span><br><span class="line">        entries = self.db.query(<span class="string">&quot;SELECT * FROM entries ORDER BY date DESC&quot;</span>)</span><br><span class="line">        self.render(<span class="string">&quot;home.html&quot;</span>, entries=entries)</span><br><span class="line"> </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">EntryHandler</span>(tornado.web.RequestHandler):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get</span>(<span class="params">self, entry_id</span>):</span><br><span class="line">        entry = self.db.get(<span class="string">&quot;SELECT * FROM entries WHERE id = %s&quot;</span>, entry_id)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> entry: <span class="keyword">raise</span> tornado.web.HTTPError(<span class="number">404</span>)</span><br><span class="line">        self.render(<span class="string">&quot;entry.html&quot;</span>, entry=entry)</span><br><span class="line"> </span><br><span class="line">settings = &#123;</span><br><span class="line">    <span class="string">&quot;ui_modules&quot;</span>: uimodules,</span><br><span class="line">&#125;</span><br><span class="line">application = tornado.web.Application([</span><br><span class="line">    (<span class="string">r&quot;/&quot;</span>, HomeHandler),</span><br><span class="line">    (<span class="string">r&quot;/entry/([0-9]+)&quot;</span>, EntryHandler),</span><br><span class="line">], **settings)</span><br><span class="line">&#123;% module Entry(entry, show_comments=<span class="literal">True</span>) %&#125;</span><br></pre></td></tr></table></figure>

<h3 id="非阻塞式异步请求"><a href="#非阻塞式异步请求" class="headerlink" title="非阻塞式异步请求"></a>非阻塞式异步请求</h3><p>Tornado 当中使用了 一种非阻塞式的 I&#x2F;O 模型，所以你可以改变这种默认的处理行为——让一个请求一直保持 连接状态，而不是马上返回，直到一个主处理行为返回。要实现这种处理方式，只需要 使用 tornado.web.asynchronous 装饰器就可以了。</p>
<h3 id="调试模式和自动重载"><a href="#调试模式和自动重载" class="headerlink" title="调试模式和自动重载"></a>调试模式和自动重载</h3><p>如果你将 debug&#x3D;True 传递给 Application 构造器，该 app 将以调试模式 运行。在调试模式下，模板将不会被缓存，而这个 app 会监视代码文件的修改， 如果发现修改动作，这个 app 就会被重新加载。在开发过程中，这会大大减少 手动重启服务的次数。然而有些问题（例如 import 时的语法错误）还是会让服务器 下线，目前的 debug 模式还无法避免这些情况。</p>
<p><a target="_blank" rel="noopener" href="http://demo.pythoner.com/itt2zh/index.html">参考地址</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://noge.top/2015/03/26/1.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="nuniok">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="码力欧">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2015/03/26/1.html" class="post-title-link" itemprop="url">分治策略之最大子数组问题</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2015-03-26 00:00:00" itemprop="dateCreated datePublished" datetime="2015-03-26T00:00:00+00:00">2015-03-26</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <ol>
<li>最简单直接的是暴利遍历数组可求得最大子数组，时间复杂度为O(n^2)</li>
<li>采用分治策略将数组分为两个子数组去求解右如下三种情况：<ul>
<li>最大子数组在左子数组中。</li>
<li>最大子数组在右子数组中。</li>
<li>最大子数组跨越两个子数组中。</li>
</ul>
</li>
</ol>
<p>重点在于求最大子数组跨越两个子数组的情况。<br>从数组的中间点为一定点向左和向右遍历分别求得最大子数组。<br>然后相加得跨越两个子数组的最大子数组。</p>
<p>然后采用递归的方法将左子数组和右子数组继续拆分，最后当左右子数组为一个元素时结束返回。</p>
<p>在递归的每一层中计算完三种情况后选取当下的最大子数组情况返回。</p>
<p>最后得到的结果便是连续最大子数组。</p>
<p>采用分治策略的时间复杂度为O(nlogn)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">import random</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def find_max_crossing_subarray(A, low, mid, high):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    求跨越两个数组的最大字数组</span><br><span class="line">    :param A:</span><br><span class="line">    :param low:</span><br><span class="line">    :param mid:</span><br><span class="line">    :param high:</span><br><span class="line">    :return:</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    left_sum = A[mid]</span><br><span class="line">    left_index = mid</span><br><span class="line">    sum = 0</span><br><span class="line">    for left in range(mid, low - 1, -1):</span><br><span class="line">        sum = sum + A[left]</span><br><span class="line">        if sum &gt; left_sum:</span><br><span class="line">            left_sum = sum</span><br><span class="line">            left_index = left</span><br><span class="line"></span><br><span class="line">    right_sum = A[mid + 1]</span><br><span class="line">    right_index = mid + 1</span><br><span class="line">    sum = 0</span><br><span class="line">    for right in range(mid + 1, high + 1):</span><br><span class="line">        sum = sum + A[right]</span><br><span class="line">        if sum &gt; right_sum:</span><br><span class="line">            right_sum = sum</span><br><span class="line">            right_index = right</span><br><span class="line">    return left_index, right_index, left_sum + right_sum</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def find_max_subarray(A, low, high):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    寻找数组中的最大子数组</span><br><span class="line">    :param A:</span><br><span class="line">    :param low:</span><br><span class="line">    :param high:</span><br><span class="line">    :return:</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    if low == high:</span><br><span class="line">        return low, high, A[low]</span><br><span class="line">    else:</span><br><span class="line">        # 求中值</span><br><span class="line">        mid = (low + high) / 2</span><br><span class="line">        # 求左子数组最大子数组</span><br><span class="line">        left_low, left_high, left_sum = find_max_subarray(A, low, mid)</span><br><span class="line">        # 求右子数组最大子数组</span><br><span class="line">        right_low, right_high, right_sum = find_max_subarray(A, mid + 1, high)</span><br><span class="line">        # 求跨两个子数组的最大子数组</span><br><span class="line">        cross_low, cross_high, cross_sum = find_max_crossing_subarray(A, low, mid, high)</span><br><span class="line">        # 选出最大子数组</span><br><span class="line">        if left_sum &gt;= right_sum and left_sum &gt;= cross_sum:</span><br><span class="line">            return left_low, left_high, left_sum</span><br><span class="line">        elif right_sum &gt;= left_sum and right_sum &gt;= cross_sum:</span><br><span class="line">            return right_low, right_high, right_sum</span><br><span class="line">        elif cross_sum &gt;= left_sum and cross_sum &gt;= right_sum:</span><br><span class="line">            return cross_low, cross_high, cross_sum</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ == &quot;__main__&quot;:</span><br><span class="line">    random_list = [random.randint(-100, 100) for _ in range(100)]</span><br><span class="line">    print random_list</span><br><span class="line">    alow, ahigh, asum = find_max_subarray(random_list, 0, len(random_list) - 1)</span><br><span class="line">    print random_list[alow: ahigh + 1], asum</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://noge.top/2015/03/18/1.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="nuniok">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="码力欧">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2015/03/18/1.html" class="post-title-link" itemprop="url">Python简单web服务</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2015-03-18 00:00:00" itemprop="dateCreated datePublished" datetime="2015-03-18T00:00:00+00:00">2015-03-18</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>利用Python自带的包可以建立简单的web服务器。在DOS里cd到准备做服务器根目录的路径下，输入命令：<br>python -m Web服务器模块 [端口号，默认8000]<br>例如：<br>python -m SimpleHTTPServer 8080<br>然后就可以在浏览器中输入<br><a href="http://localhost:端口号/路径">http://localhost:端口号/路径</a><br>来访问服务器资源。<br>例如：<br><a target="_blank" rel="noopener" href="http://localhost:8080/index.htm%EF%BC%88%E5%BD%93%E7%84%B6index.htm%E6%96%87%E4%BB%B6%E5%BE%97%E8%87%AA%E5%B7%B1%E5%88%9B%E5%BB%BA%EF%BC%89">http://localhost:8080/index.htm（当然index.htm文件得自己创建）</a><br>其他机器也可以通过服务器的IP地址来访问。</p>
<p>这里的“Web服务器模块”有如下三种：</p>
<ul>
<li>BaseHTTPServer: 提供基本的Web服务和处理器类，分别是HTTPServer和BaseHTTPRequestHandler。</li>
<li>SimpleHTTPServer: 包含执行GET和HEAD请求的SimpleHTTPRequestHandler类。</li>
<li>CGIHTTPServer: 包含处理POST请求和执行CGIHTTPRequestHandler类。</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://noge.top/2015/03/08/1.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="nuniok">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="码力欧">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2015/03/08/1.html" class="post-title-link" itemprop="url">常见排序算法Python版</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2015-03-08 00:00:00" itemprop="dateCreated datePublished" datetime="2015-03-08T00:00:00+00:00">2015-03-08</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>平均时间复杂度均为O(n^2)的排序算法：</p>
<h2 id="插入排序"><a href="#插入排序" class="headerlink" title="插入排序"></a>插入排序</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"># -*- coding:utf-8 -*-</span><br><span class="line"># 插入排序，两层遍历，以一个位置为基准，不断向前遍历，将比基准位置大的数调整到基准位置。</span><br><span class="line">def insertion_sort(sort_list):</span><br><span class="line">    iter_len = len(sort_list)</span><br><span class="line">    if iter_len &lt; 2:</span><br><span class="line">        return sort_list</span><br><span class="line">    for i in range(1, iter_len):</span><br><span class="line">        key = sort_list[i]</span><br><span class="line">        j = i - 1</span><br><span class="line">        while j&gt;=0 and sort_list[j]&gt;key:</span><br><span class="line">            sort_list[j+1] = sort_list[j]</span><br><span class="line">            j -= 1</span><br><span class="line">        sort_list[j+1] = key</span><br><span class="line">    return sort_list</span><br><span class="line">if __name__ == &quot;__main__&quot;:</span><br><span class="line">    sort_list = [4,2,7,3,1,9,33,25,46,21,45,22]</span><br><span class="line">    print sort_list</span><br><span class="line">    print insertion_sort(sort_list)</span><br></pre></td></tr></table></figure>


<h2 id="冒泡排序"><a href="#冒泡排序" class="headerlink" title="冒泡排序"></a>冒泡排序</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">def bubble_sort(sort_list):</span><br><span class="line">    iter_len = len(sort_list)</span><br><span class="line">    if iter_len &lt; 2:</span><br><span class="line">        return sort_list</span><br><span class="line">    for i in range(iter_len-1):</span><br><span class="line">        for j in range(iter_len-i-1):</span><br><span class="line">            if sort_list[j] &gt; sort_list[j+1]:</span><br><span class="line">                sort_list[j], sort_list[j+1] = sort_list[j+1], sort_list[j]</span><br><span class="line">    return sort_list</span><br><span class="line">if __name__ == &quot;__main__&quot;:</span><br><span class="line">    sort_list = [4,2,7,3,1,9,33,25,46,21,45,22]</span><br><span class="line">    print sort_list</span><br><span class="line">    print bubble_sort(sort_list)</span><br></pre></td></tr></table></figure>


<h2 id="选择排序"><a href="#选择排序" class="headerlink" title="选择排序"></a>选择排序</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"># -*- coding:utf-8 -*-</span><br><span class="line"># 向后遍历，选择最小值进行交换。</span><br><span class="line">def selection_sort(sort_list):</span><br><span class="line">    iter_len = len(sort_list)</span><br><span class="line">    if iter_len &lt; 2:</span><br><span class="line">        return sort_list</span><br><span class="line">    for i in range(iter_len-1):</span><br><span class="line">        smallest = sort_list[i]</span><br><span class="line">        location = i</span><br><span class="line">        for j in range(i, iter_len):</span><br><span class="line">            if sort_list[j] &lt; smallest:</span><br><span class="line">                smallest = sort_list[j]</span><br><span class="line">                location = j</span><br><span class="line">        if i != location:</span><br><span class="line">            sort_list[i], sort_list[location] = sort_list[location], sort_list[i]</span><br><span class="line">    return sort_list</span><br><span class="line">if __name__ == &quot;__main__&quot;:</span><br><span class="line">    sort_list = [4,2,7,3,1,9,33,25,46,21,45,22]</span><br><span class="line">    print sort_list</span><br><span class="line">    print selection_sort(sort_list)</span><br></pre></td></tr></table></figure>

<h2 id="归并排序"><a href="#归并排序" class="headerlink" title="归并排序"></a>归并排序</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">class Merge_sort(object):</span><br><span class="line">    def _merge(self, alist, p, q, r):</span><br><span class="line">        left = alist[p:q+1]</span><br><span class="line">        right = alist[q+1:r+1]</span><br><span class="line">        for i in range(p, r+1):</span><br><span class="line">            if len(left)&gt;0 and len(right)&gt;0:</span><br><span class="line">                if left[0]&lt;=right[0]:</span><br><span class="line">                    alist[i] = left.pop(0)</span><br><span class="line">                else:</span><br><span class="line">                    alist[i] = right.pop(0)</span><br><span class="line">            elif len(right)==0:</span><br><span class="line">                alist[i] = left.pop(0)</span><br><span class="line">            elif len(left)==0:</span><br><span class="line">                alist[i] = right.pop(0)</span><br><span class="line"> </span><br><span class="line">    def _merge_sort(self, alist, p, r):</span><br><span class="line">        if p&lt;r:</span><br><span class="line">            q = int((p+r)/2)</span><br><span class="line">            self._merge_sort(alist, p, q)</span><br><span class="line">            self._merge_sort(alist, q+1, r)</span><br><span class="line">            self._merge(alist, p, q, r)</span><br><span class="line"> </span><br><span class="line">    def __call__(self, sort_list):</span><br><span class="line">        self._merge_sort(sort_list, 0, len(sort_list)-1)</span><br><span class="line">        return sort_list</span><br><span class="line">if __name__ == &quot;__main__&quot;:</span><br><span class="line">    sort_list = [4,2,7,3,1,9,33,25,46,21,45,22]</span><br><span class="line">    print sort_list</span><br><span class="line">    merge = Merge_sort()</span><br><span class="line">    print merge(sort_list)</span><br></pre></td></tr></table></figure>

<h2 id="堆排序"><a href="#堆排序" class="headerlink" title="堆排序"></a>堆排序</h2><p>堆排序，是建立在数据结构——堆上的。关于堆的基本概念、以及堆的存储方式这里不作介绍。这里用一个列表来存储堆（和用数组存储类似），对于处在i位置的元素，2<em>i+1位置上的是其左孩子，2</em>i+2是其右孩子，类似得可以得出该元素的父元素。<br>首先我们写一个函数，对于某个子树，从根节点开始，如果其值小于子节点的值，就交换其值。用此方法来递归其子树。接着，我们对于堆的所有非叶节点，自下而上调用先前所述的函数，得到一个树，对于每个节点（非叶节点），它都大于其子节点。（其实这是建立最大堆的过程）在完成之后，将列表的头元素和尾元素调换顺序，这样列表的最后一位就是最大的数，接着在对列表的0到n-1部分再调用以上建立最大堆的过程。最后得到堆排序完成的列表。</p>
<h2 id="快速排序"><a href="#快速排序" class="headerlink" title="快速排序"></a>快速排序</h2><p>首先要用到的是分区工具函数（partition），对于给定的列表（数组），我们首先选择基准元素（这里我选择最后一个元素），通过比较，最后使得该元素的位置，使得这个运行结束的新列表（就地运行）所有在基准元素左边的数都小于基准元素，而右边的数都大于它。然后我们对于待排的列表，用分区函数求得位置，将列表分为左右两个列表（理想情况下），然后对其递归调用分区函数，直到子序列的长度小于等于1。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">class Quick_sort(object):</span><br><span class="line">    def _partition(self, alist, p, r):</span><br><span class="line">        i = p-1</span><br><span class="line">        x = alist[r]</span><br><span class="line">        for j in range(p, r):</span><br><span class="line">            if alist[j]&lt;=x:</span><br><span class="line">                i += 1</span><br><span class="line">                alist[i], alist[j] = alist[j], alist[i]</span><br><span class="line">        alist[i+1], alist[r] = alist[r], alist[i+1]</span><br><span class="line">        return i+1</span><br><span class="line"> </span><br><span class="line">    def _quicksort(self, alist, p, r):</span><br><span class="line">        if p&lt;r:</span><br><span class="line">            q = self._partition(alist, p, r)</span><br><span class="line">            self._quicksort(alist, p, q-1)</span><br><span class="line">            self._quicksort(alist, q+1, r)</span><br><span class="line"> </span><br><span class="line">    def __call__(self, sort_list):</span><br><span class="line">        self._quicksort(sort_list, 0, len(sort_list)-1)</span><br><span class="line">        return sort_list</span><br><span class="line">if __name__ == &quot;__main__&quot;:</span><br><span class="line">    sort_list = [4,2,7,3,1,9,33,25,46,21,45,22]</span><br><span class="line">    print sort_list</span><br><span class="line">    quick = Quick_sort()</span><br><span class="line">    print quick(sort_list)</span><br></pre></td></tr></table></figure>

<p>Python对于递归深度做了限制，默认值为1000，可以通过设置修改深度。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import sys</span><br><span class="line">sys.setrecursionlimit(99999)</span><br></pre></td></tr></table></figure>
<p>另外一种是随机化分区函数。由于之前我们的选择都是子序列的最后一个数，因此对于特殊情况的健壮性就差了许多。现在我们随机从子序列选择基准元素，这样可以减少对特殊情况的差错率。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">import random</span><br><span class="line">class Random_quick_sort(object):</span><br><span class="line">    </span><br><span class="line">    def _randomized_partition(self, alist, p, r):</span><br><span class="line">        i = random.randint(p, r)</span><br><span class="line">        alist[i], alist[r] = alist[r], alist[i]</span><br><span class="line">        return self._partition(alist, p, r)</span><br><span class="line">    def _partition(self, alist, p, r):</span><br><span class="line">        i = p-1</span><br><span class="line">        x = alist[r]</span><br><span class="line">        for j in range(p, r):</span><br><span class="line">            if alist[j]&lt;=x:</span><br><span class="line">                i += 1</span><br><span class="line">                alist[i], alist[j] = alist[j], alist[i]</span><br><span class="line">        alist[i+1], alist[r] = alist[r], alist[i+1]</span><br><span class="line">        return i+1</span><br><span class="line">    def _quicksort(self, alist, p, r):</span><br><span class="line">        if p&lt;r:</span><br><span class="line">            q = self._randomized_partition(alist, p, r)</span><br><span class="line">            self._quicksort(alist, p, q-1)</span><br><span class="line">            self._quicksort(alist, q+1, r)</span><br><span class="line"> </span><br><span class="line">    def __call__(self, sort_list):</span><br><span class="line">        self._quicksort(sort_list, 0, len(sort_list)-1)</span><br><span class="line">        return sort_list</span><br><span class="line">if __name__ == &quot;__main__&quot;:</span><br><span class="line">    sort_list = [4,2,7,3,1,9,33,25,46,21,45,22]</span><br><span class="line">    print sort_list</span><br><span class="line">    random_quick = Random_quick_sort()</span><br><span class="line">    print random_quick(sort_list)</span><br></pre></td></tr></table></figure>

<h2 id="Python风格快速排序算法"><a href="#Python风格快速排序算法" class="headerlink" title="Python风格快速排序算法"></a>Python风格快速排序算法</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">def quick_sort_2(sort_list):</span><br><span class="line">    if len(sort_list)&lt;=1:</span><br><span class="line">        return sort_list</span><br><span class="line">    return quick_sort_2([lt for lt in sort_list[1:] if lt&lt;sort_list[0]]) + \</span><br><span class="line">           sort_list[0:1] + \</span><br><span class="line">           quick_sort_2([ge for ge in sort_list[1:] if ge&gt;=sort_list[0]])</span><br><span class="line">if __name__ == &quot;__main__&quot;:</span><br><span class="line">    sort_list = [4,2,7,3,1,9,33,25,46,21,45,22]</span><br><span class="line">    print sort_list</span><br><span class="line">    print quick_sort_2(sort_list)</span><br></pre></td></tr></table></figure>

<h2 id="计数排序"><a href="#计数排序" class="headerlink" title="计数排序"></a>计数排序</h2><p>计数排序的基本思想是对于给定的输入序列中的每一个元素x，确定该序列中值小于x的元素的个数。一旦有了这个信息，就可以将x直接存放到最终的输出序列的正确位置上。例如，如果输入序列中只有17个元素的值小于x的值，则x可以直接存放在输出序列的第18个位置上。当然，如果有多个元素具有相同的值时，我们不能将这些元素放在输出序列的同一个位置上，因此，上述方案还要作适当的修改。<br>假设输入的线性表L的长度为n，L&#x3D;L1,L2,..,Ln；线性表的元素属于有限偏序集S，|S|&#x3D;k且k&#x3D;O(n)，S&#x3D;{S1,S2,..Sk}；则计数排序可以描述如下：<br>1、扫描整个集合S，对每一个Si∈S，找到在线性表L中小于等于Si的元素的个数T(Si)；<br>2、扫描整个线性表L，对L中的每一个元素Li，将Li放在输出线性表的第T(Li)个位置上，并将T(Li)减1。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">class Counting_sort(object):</span><br><span class="line">    def _counting_sort(self, alist, k):</span><br><span class="line">        alist3 = [0 for i in range(k)]</span><br><span class="line">        alist2 = [0 for i in range(len(alist))]</span><br><span class="line">        for j in alist:</span><br><span class="line">            alist3[j] += 1</span><br><span class="line">        for i in range(1, k):</span><br><span class="line">            alist3[i] = alist3[i-1] + alist3[i]</span><br><span class="line">        for l in alist[::-1]:</span><br><span class="line">            alist2[alist3[l]-1] = l</span><br><span class="line">            alist3[l] -= 1</span><br><span class="line">        return alist2</span><br><span class="line"> </span><br><span class="line">    def __call__(self, sort_list, k=None):</span><br><span class="line">        if k is None:</span><br><span class="line">            import heapq</span><br><span class="line">            k = heapq.nlargest(1, sort_list)[0] + 1</span><br><span class="line">        return self._counting_sort(sort_list, k)</span><br><span class="line">if __name__ == &quot;__main__&quot;:</span><br><span class="line">    sort_list = [4,2,7,3,1,9,33,25,46,21,45,22]</span><br><span class="line">    print sort_list</span><br><span class="line">    counting = Counting_sort()</span><br><span class="line">    print counting(sort_list)</span><br></pre></td></tr></table></figure>

<p>排序算法用于研究其思想，具体的应用需要根据实际环境进行修改，但是要遵循以下规则。<br>当需要排序的时候，尽量设法使用内建Python列表的sort方法。<br>当需要搜索的时候，尽量设法使用内建的字典。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://noge.top/2014/10/22/1.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="nuniok">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="码力欧">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2014/10/22/1.html" class="post-title-link" itemprop="url">Python装饰器模式</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2014-10-22 00:00:00" itemprop="dateCreated datePublished" datetime="2014-10-22T00:00:00+00:00">2014-10-22</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>装饰器模式定义：动态地给一个对象添加一些额外的职责。</p>
<p>在 Python 中 Decorator Mode 可以按照像其它编程语言如 C++、Java 等的样子来实现，但是 Python 在应用装饰概念方面的能力上远不止于此， Python 提供了一个语法和一个编程特性来加强这方面的功能。</p>
<p>首先需要了解一下 Python 中闭包的概念：如果在一个内部函数里，对在外部作用域（但不是在全局作用域）的变量进行引用，那么内部函数就被认为是闭包（closure）。</p>
<p><img src="/resource/img/Dec/dec1.png" alt="dec1"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">def makeblod(fn):</span><br><span class="line">    def wrapped():</span><br><span class="line">        return &#x27;&lt;b&gt;&#x27;+fn()+&#x27;&lt;/b&gt;&#x27;</span><br><span class="line">    return wrapped</span><br><span class="line"></span><br><span class="line">def makeitalic(fn):</span><br><span class="line">    def wrapped():</span><br><span class="line">        return &#x27;&lt;i&gt;&#x27;+fn()+&#x27;&lt;/i&gt;&#x27;</span><br><span class="line">    return wrapped</span><br><span class="line"></span><br><span class="line">@makeblod</span><br><span class="line">@makeitalic</span><br><span class="line">def hello():</span><br><span class="line">    return &#x27;hello world&#x27;</span><br><span class="line"></span><br><span class="line">print hello()</span><br></pre></td></tr></table></figure>

<p><img src="/resource/img/Dec/dec2.png" alt="dec2"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">def deco(arg):</span><br><span class="line">    def _deco(func):</span><br><span class="line">        def __deco():</span><br><span class="line">            print &quot;before %s called [%s].&quot; % (func.__name__, arg)</span><br><span class="line">            func()</span><br><span class="line">            print &quot;after %s called [%s].&quot; % (func.__name__, arg)</span><br><span class="line">        return __deco</span><br><span class="line">    return _deco</span><br><span class="line"></span><br><span class="line">@deco(&quot;mymodule&quot;)</span><br><span class="line">def myfunc():</span><br><span class="line">    print &quot;myfunc() called.&quot;</span><br><span class="line">myfunc()</span><br></pre></td></tr></table></figure>

<p>闭包学习：</p>
<p><a target="_blank" rel="noopener" href="http://blog.csdn.net/marty_fu/article/details/7679297">http://blog.csdn.net/marty_fu/article/details/7679297</a></p>
<p>接收参数的装饰器</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">decorator</span>(<span class="params">run_count</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_decorator</span>(<span class="params">fun</span>):</span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">wrapper</span>(<span class="params">*args, **kwargs</span>):</span><br><span class="line">            start = time.time()</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> xrange(run_count):</span><br><span class="line">                fun(*args, **kwargs)</span><br><span class="line">            runtime = time.time() - start</span><br><span class="line">            <span class="built_in">print</span> runtime</span><br><span class="line">        <span class="keyword">return</span> wrapper</span><br><span class="line">    <span class="keyword">return</span> _decorator</span><br><span class="line"></span><br><span class="line"><span class="meta">@decorator(<span class="params"><span class="number">2</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">do_something</span>(<span class="params">name</span>):</span><br><span class="line">    time.sleep(<span class="number">0.1</span>)</span><br><span class="line">    <span class="built_in">print</span> <span class="string">&quot;play game &quot;</span> + name</span><br><span class="line"></span><br><span class="line">do_something(<span class="string">&quot;san guo sha&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>装饰器类</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">decorator</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, count</span>):</span><br><span class="line">        self._count = count</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__call__</span>(<span class="params">self, fun</span>):</span><br><span class="line">        self.fun = fun</span><br><span class="line">        <span class="keyword">return</span> self.call_fun</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">call_fun</span>(<span class="params">self, *args, **kwargs</span>):</span><br><span class="line">        start = time.time()</span><br><span class="line">        <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(self._count):</span><br><span class="line">            self.fun(*args, **kwargs)</span><br><span class="line">        runtime = time.time() - start</span><br><span class="line">        <span class="built_in">print</span> runtime</span><br><span class="line"></span><br><span class="line"><span class="meta">@decorator(<span class="params"><span class="number">2</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">do_something</span>():</span><br><span class="line">    time.sleep(<span class="number">0.1</span>)</span><br><span class="line">    <span class="built_in">print</span> <span class="string">&quot;play game&quot;</span></span><br><span class="line"></span><br><span class="line">do_something()</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://noge.top/2014/10/16/1.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="nuniok">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="码力欧">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2014/10/16/1.html" class="post-title-link" itemprop="url">SQL的几种连接：内连接、左联接、右连接、全连接、交叉连接</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2014-10-16 00:00:00" itemprop="dateCreated datePublished" datetime="2014-10-16T00:00:00+00:00">2014-10-16</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>SQL连接可以分为内连接、外连接、交叉连接。</p>
<p>数据库数据：<br><img src="/resource/img/sql/SQL01.png" alt="book表"><br><img src="/resource/img/sql/SQL02.png" alt="stu表"></p>
<h2 id="内连接"><a href="#内连接" class="headerlink" title="内连接"></a>内连接</h2><ul>
<li>等值连接：在连接条件中使用等于号(&#x3D;)运算符比较被连接列的列值，其查询结果中列出被连接表中的所有列，包括其中的重复列。</li>
<li>不等值连接：在连接条件使用除等于运算符以外的其它比较运算符比较被连接的列的列值。这些运算符包括&gt;、&gt;&#x3D;、&lt;&#x3D;、&lt;、!&gt;、!&lt;和&lt;&gt;。</li>
<li>自然连接：在连接条件中使用等于(&#x3D;)运算符比较被连接列的列值，但它使用选择列表指出查询结果集合中所包括的列，并删除连接表中的重复列。</li>
</ul>
<p>内连接：内连接查询操作列出与连接条件匹配的数据行，它使用比较运算符比较被连接列的列值。<br><code>select * from book as a,stu as b where a.sutid = b.stuidselect * from book as a inner join stu as b on a.sutid = b.stuid</code></p>
<p>内连接可以使用上面两种方式，其中第二种方式的inner可以省略。</p>
<p><img src="/resource/img/sql/SQL03.png" alt="stu表"></p>
<p>其连接结果如上图，是按照a.stuid &#x3D; b.stuid进行连接。</p>
<h2 id="外连接"><a href="#外连接" class="headerlink" title="外连接"></a>外连接</h2><ul>
<li>左联接：是以左表为基准，将a.stuid &#x3D; b.stuid的数据进行连接，然后将左表没有的对应项显示，右表的列为NULL<br><code>select * from book as a left join stu as b on a.sutid = b.stuid</code></li>
</ul>
<p><img src="/resource/img/sql/SQL04.png" alt="stu表"></p>
<ul>
<li>右连接：是以右表为基准，将a.stuid &#x3D; b.stuid的数据进行连接，然以将右表没有的对应项显示，左表的列为NULL<br><code>select * from book as a right join stu as b on a.sutid = b.stuid</code></li>
</ul>
<p><img src="/resource/img/sql/SQL05.png" alt="stu表"></p>
<ul>
<li>全连接：完整外部联接返回左表和右表中的所有行。当某行在另一个表中没有匹配行时，则另一个表的选择列表列包含空值。如果表之间有匹配行，则整个结果集行包含基表的数据值。<br><code>select * from book as a full outer join stu as b on a.sutid = b.stuid</code></li>
</ul>
<p><img src="/resource/img/sql/SQL06.png" alt="stu表"></p>
<h2 id="交叉连接"><a href="#交叉连接" class="headerlink" title="交叉连接"></a>交叉连接</h2><p>交叉连接：交叉联接返回左表中的所有行，左表中的每一行与右表中的所有行组合。交叉联接也称作笛卡尔积。<br><code>select * from book as a cross join stu as b order by a.id</code></p>
<p><img src="/resource/img/sql/SQL07.png" alt="stu表"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://noge.top/2014/04/22/1.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="nuniok">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="码力欧">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2014/04/22/1.html" class="post-title-link" itemprop="url">伪彩色处理</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2014-04-22 00:00:00" itemprop="dateCreated datePublished" datetime="2014-04-22T00:00:00+00:00">2014-04-22</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>伪彩色处理是指将灰度图像转换成彩色图象。因为人眼对于彩色的分辨能力远高于对灰度图像的分辨能力，所以将灰度图像转换成彩色可以提高人眼对图像细节的辨别能力。伪彩色并不能真实的反映图像像的彩色情况。</p>
<p>效果图：<br><img src="/resource/img/15455544332499.jpg"></p>
<p>强度分层法和灰度级-彩色变换法：<br>（1）强度分层法是伪彩色处理技术中最简单的一种。<br>在某个灰度级Li上设置一个平行于x-y平面的切割平面，切割平面下面的，即灰度级小于Li的像素分配给一种颜色，相应的切割平面上大于灰度级Li的像素分配给另一种颜色。这样切割结果可以分成两层的伪彩色。可以使用M个平面去切割，就会得到M个不同灰度级的区域，这样就是具有M种颜色的为彩色图像。这种方法虽然简单，但是视觉效果不理想。<br>（2）灰度级-彩色变换法可以将灰度图像变为具有多种颜色渐变的连续彩色图像。<br>主要就是将图像通过不同变换特性的红、绿、蓝3个变换器，然后将三个颜色通道的输出合成某种颜色。由于三种颜色变换的不同，使得不同大小灰度级可以合成不同的颜色。一组典型的变换传递函数如下图。<br><img src="/resource/img/15455544967422.jpg"></p>
<p>这里面需要注意的地方，代码只能是处理JPG格式的灰度图像，因为JPG图像的颜色深度是24位表示（R,G,B），每像素由3个字节表示即可，然而PNG图像的颜色深度是32位表示（R,G,B,A）。</p>
<p>下面的代码是测试代码，以处理24位深度的图像为例，同像素不同通道的颜色值要相同，组合表示出是具有一定灰度的颜色。在实际应用中需要修改下面的代码依据要处理的图像格式。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line">#region 伪彩色图像处理</span><br><span class="line"></span><br><span class="line">/// &lt;summary&gt;</span><br><span class="line">/// 伪彩色图像处理</span><br><span class="line">/// 博客园-初行 http://www.cnblogs.com/zxlovenet</span><br><span class="line">/// 日期：2014.2.14</span><br><span class="line">/// &lt;/summary&gt;</span><br><span class="line">/// &lt;param name=&quot;bmp&quot;&gt;传入的灰度图像&lt;/param&gt;</span><br><span class="line">/// &lt;param name=&quot;method&quot;&gt;使用何种方法，false强度分层法,true灰度级-彩色变换法&lt;/param&gt;</span><br><span class="line">/// &lt;param name=&quot;seg&quot;&gt;强度分层中的分层数&lt;/param&gt;</span><br><span class="line">/// &lt;returns&gt;返回伪彩色图像&lt;/returns&gt;</span><br><span class="line">private Bitmap gcTrans(Bitmap bmp, bool method, byte seg)</span><br><span class="line">&#123;</span><br><span class="line">    if (bmp != null)</span><br><span class="line">    &#123;</span><br><span class="line">        if (System.Drawing.Imaging.PixelFormat.Format24bppRgb == bmp.PixelFormat)</span><br><span class="line">        &#123;</span><br><span class="line">            Rectangle rect = new Rectangle(0, 0, bmp.Width, bmp.Height);</span><br><span class="line">            System.Drawing.Imaging.BitmapData bmpData = bmp.LockBits(rect, System.Drawing.Imaging.ImageLockMode.ReadWrite, bmp.PixelFormat);</span><br><span class="line">            IntPtr ptr = bmpData.Scan0;</span><br><span class="line">            int bytes = bmp.Width * bmp.Height * 3;</span><br><span class="line">            byte[] grayValues = new byte[bytes];</span><br><span class="line">            System.Runtime.InteropServices.Marshal.Copy(ptr, grayValues, 0, bytes);</span><br><span class="line">            bmp.UnlockBits(bmpData);</span><br><span class="line"></span><br><span class="line">            byte[] rgbValues = new byte[bytes];</span><br><span class="line">            //清零</span><br><span class="line">            Array.Clear(rgbValues, 0, bytes);</span><br><span class="line">            byte tempB;</span><br><span class="line"></span><br><span class="line">            if (method == false)</span><br><span class="line">            &#123;</span><br><span class="line">                //强度分层法</span><br><span class="line">                for (int i = 0; i &lt; bytes; i += 3)</span><br><span class="line">                &#123;</span><br><span class="line">                    byte ser = (byte)(256 / seg);</span><br><span class="line">                    tempB = (byte)(grayValues[i] / ser);</span><br><span class="line">                    //分配任意一种颜色</span><br><span class="line">                    rgbValues[i + 1] = (byte)(tempB * ser);</span><br><span class="line">                    rgbValues[i] = (byte)((seg - 1 - tempB) * ser);</span><br><span class="line">                    rgbValues[i + 2] = 0;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            else</span><br><span class="line">            &#123;</span><br><span class="line">                //灰度级-彩色变换法</span><br><span class="line">                for (int i = 0; i &lt; bytes; i += 3)</span><br><span class="line">                &#123;</span><br><span class="line">                    if (grayValues[i] &lt; 64)</span><br><span class="line">                    &#123;</span><br><span class="line">                        rgbValues[i + 2] = 0;</span><br><span class="line">                        rgbValues[i + 1] = (byte)(4 * grayValues[i]);</span><br><span class="line">                        rgbValues[i] = 255;</span><br><span class="line">                    &#125;</span><br><span class="line">                    else if (grayValues[i] &lt; 128)</span><br><span class="line">                    &#123;</span><br><span class="line">                        rgbValues[i + 2] = 0;</span><br><span class="line">                        rgbValues[i + 1] = 255;</span><br><span class="line">                        rgbValues[i] = (byte)(-4 * grayValues[i] + 2 * 255);</span><br><span class="line">                    &#125;</span><br><span class="line">                    else if (grayValues[i] &lt; 192)</span><br><span class="line">                    &#123;</span><br><span class="line">                        rgbValues[i + 2] = (byte)(4 * grayValues[i] - 2 * 255);</span><br><span class="line">                        rgbValues[i + 1] = 255;</span><br><span class="line">                        rgbValues[i] = 0;</span><br><span class="line">                    &#125;</span><br><span class="line">                    else</span><br><span class="line">                    &#123;</span><br><span class="line">                        rgbValues[i + 2] = 255;</span><br><span class="line">                        rgbValues[i + 1] = (byte)(-4 * grayValues[i] + 4 * 255);</span><br><span class="line">                        rgbValues[i] = 0;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            bmp = new Bitmap(bmp.Width, bmp.Height, System.Drawing.Imaging.PixelFormat.Format24bppRgb);</span><br><span class="line">            bmpData = bmp.LockBits(rect, System.Drawing.Imaging.ImageLockMode.ReadWrite, bmp.PixelFormat);</span><br><span class="line">            ptr = bmpData.Scan0;</span><br><span class="line"></span><br><span class="line">            System.Runtime.InteropServices.Marshal.Copy(rgbValues, 0, ptr, bytes);</span><br><span class="line">            bmp.UnlockBits(bmpData);</span><br><span class="line"></span><br><span class="line">            return bmp;</span><br><span class="line">        &#125;</span><br><span class="line">        else</span><br><span class="line">        &#123;</span><br><span class="line">            return null;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    else</span><br><span class="line">    &#123;</span><br><span class="line">        return null;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">#endregion</span><br></pre></td></tr></table></figure>

<p>颜色映射：<br><img src="/resource/img/15455545098350.jpg"></p>
<p>颜色映射的方法需要做一个颜色映射表，不同灰度级都会有对应的颜色。这个跟强度分层法相似，可以分成不同的层次，对应的颜色可以根据实际情况做映射。<br>在实际应用中，热成像测温系统所产生的红外图像为黑白灰度级图像，灰度值动态范围不大，人眼很难从这些灰度级中获得丰富的信息。为了更直观地增强显示图像的层次，提高人眼分辨能力，对系统所摄取的图像进行伪彩色处理，从而达到图像增强的效果，使图像信息更加丰富。例如对受热物体所成的像进行伪彩色时，将灰度低的区域设置在蓝色附近(或蓝灰、黑等)，而灰度级高的区域设置在红色附近(或棕红、白等)，以方便人们对物体的观察。</p>
<p>下面几张图片是在实际应用中的情况（图片来源网络，侵删）：<br><img src="/resource/img/15455545220346.jpg"><br><img src="/resource/img/15455545275803.jpg"><br><img src="/resource/img/15455545323031.jpg"></p>
<p><a href="/resource/file/GreyColor-Convert.rar">xmind文件</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://noge.top/2010/06/24/2.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="nuniok">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="码力欧">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2010/06/24/2.html" class="post-title-link" itemprop="url">Python开发工具箱</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2010-06-24 00:00:00" itemprop="dateCreated datePublished" datetime="2010-06-24T00:00:00+00:00">2010-06-24</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>ipython：<br><code>sudo pip install ipython</code></p>
<p>ipython notebook：<br><code>sudo pip install notebook</code></p>
<p>Pycharm</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://noge.top/2010/01/01/12.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="nuniok">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="码力欧">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2010/01/01/12.html" class="post-title-link" itemprop="url">支付交易系统架构</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2010-01-01 00:00:00" itemprop="dateCreated datePublished" datetime="2010-01-01T00:00:00+00:00">2010-01-01</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <hr>
<p>交易过程：<br>1.	客户下单<br>2.	客户完成支付<br>3.	商家接单<br>4.	商家发货</p>
<p>从软件开发角度， 还有一些非功能性需求需要实现：<br>1.	性能： 特别是秒杀的时候，如何满足高频率的支付需求？<br>2.	可靠性：不用说，系统能达到几个9，是衡量软件设计功力的重要指标。 99%是基础， 99.999%是目标，更多的9哪就是神了。<br>3.	易用性：支付中多一个步骤，就会流失至少2%的用户。 产品经理都在削尖脑袋想想怎么让用户赶紧掏钱。<br>4.	可扩展性： 近年来支付业务创新产品多，一元购、红包、打赏等，还有各种的支付场景。 怎么能够快速满足产品经理的需求，尽快上线来抢占市场，可扩展性对支付系统设计也是一个挑战。<br>5.	可伸缩性：为了支持公司业务，搞一些促销活动是必须的。 那促销带来的爆发流量，最佳应对方法就是加机器了。 平时流量低，用不了那么多机器，该释放的就释放掉了， 给公司省点钱。</p>
<p>典型支付系统架构：<br><img src="/resource/img/15135039006989.jpg"></p>
<p>某旅游公司：<br><img src="/resource/img/15135039141413.jpg"></p>
<p>京东金融：<br><img src="/resource/img/15135039244991.jpg"></p>
<p>支付系统一般会提供如下子系统：<br>    1.	支付应用和产品.(应用层)： 这是针对各端（PC Web端、android、IOS)的应用和产品。 为各个业务系统提供收银台支持，同时支付作为一个独立的模块，可以提供诸如银行卡管理、理财、零钱、虚拟币管理、交易记录查阅、卡券等功能；<br>    2.	支付运营系统(应用层)： 支付系统从安全的角度来说，有一个重要的要求是，懂代码的不碰线上，管运营的不碰代码。这对运营系统的要求就很高，要求基本上所有线上的问题，都可以通过运营系统来解决。<br>    3.	支付BI系统(应用层): 支付中产生大量的数据，对这些数据进行分析， 有助于公司老板们了解运营状况，进行决策支持。<br>    4.	风控系统(应用层)：这是合规要求的风险控制、反洗钱合规等。<br>    5.	信用信息管理系统(应用层)：用来支持对信用算法做配置，对用户的信用信息做管理。<br>支付系统一般会提供如下子系统：<br>    1.	支付应用和产品.(应用层)： 这是针对各端（PC Web端、android、IOS)的应用和产品。 为各个业务系统提供收银台支持，同时支付作为一个独立的模块，可以提供诸如银行卡管理、理财、零钱、虚拟币管理、交易记录查阅、卡券等功能；<br>    2.	支付运营系统(应用层)： 支付系统从安全的角度来说，有一个重要的要求是，懂代码的不碰线上，管运营的不碰代码。这对运营系统的要求就很高，要求基本上所有线上的问题，都可以通过运营系统来解决。<br>    3.	支付BI系统(应用层): 支付中产生大量的数据，对这些数据进行分析， 有助于公司老板们了解运营状况，进行决策支持。<br>    4.	风控系统(应用层)：这是合规要求的风险控制、反洗钱合规等。<br>    5.	信用信息管理系统(应用层)：用来支持对信用算法做配置，对用户的信用信息做管理。</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="http://www.bijishequ.com/detail/95641">http://www.bijishequ.com/detail/95641</a></p>
</blockquote>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/9/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><span class="page-number current">10</span><a class="page-number" href="/page/11/">11</a><a class="extend next" rel="next" href="/page/11/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 2015 – 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">nuniok</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  


  <script class="next-config" data-name="mermaid" type="application/json">{"enable":true,"theme":{"light":"default","dark":"dark"},"js":{"url":"https://cdn.jsdelivr.net/npm/mermaid@8.13.4/dist/mermaid.min.js","integrity":"sha256-96rwDGMWIQYB0yKGp1sKi1yrjrLPj2oT39IpbCsIrsg="}}</script>
  <script src="/js/third-party/tags/mermaid.js"></script>



  




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js","integrity":"sha256-r+3itOMtGGjap0x+10hu6jW/gZCzxHsoKrOd7gyRSGY="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.css" integrity="sha256-AJnUHL7dBv6PGaeyPQJcgQPDjt/Hn/PvYZde1iqfp8U=" crossorigin="anonymous">

<script class="next-config" data-name="gitalk" type="application/json">{"enable":true,"github_id":"nuniok","repo":"nuniok.github.io","client_id":"Ov23liWEs17fH5aYPIzS","client_secret":"6bbfa4b5a042d38b10c942b5c15f4d8a3895e982","admin_user":"nuniok","distraction_free_mode":true,"proxy":"https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token","language":"zh-CN","js":{"url":"https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.min.js","integrity":"sha256-Pmj85ojLaPOWwRtlMJwmezB/Qg8BzvJp5eTzvXaYAfA="},"path_md5":"fd46efe9cca932ba064caf546fedea22"}</script>
<script src="/js/third-party/comments/gitalk.js"></script>

</body>
</html>
