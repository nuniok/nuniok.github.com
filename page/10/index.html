<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)">
<meta name="generator" content="Hexo 7.2.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/resource/img/fav2024.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/resource/img/fav2024.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/resource/img/fav2024.png">
  <link rel="mask-icon" href="/resource/img/fav2024.png" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"noge.top","root":"/","images":"/images","scheme":"Pisces","darkmode":true,"version":"8.8.2","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2929408904388376" crossorigin="anonymous"></script><meta property="og:type" content="website">
<meta property="og:title" content="码力欧">
<meta property="og:url" content="https://noge.top/page/10/index.html">
<meta property="og:site_name" content="码力欧">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="nuniok">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://noge.top/page/10/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/10/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>码力欧</title>
  

  <script src="/js/third-party/analytics/baidu-analytics.js"></script>
  <script async src="https://hm.baidu.com/hm.js?9cdc9a11cbd242c6336b07c464d8820c"></script>



  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">码力欧</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">瞎折腾</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="home fa-fw"></i>首页</a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="archive fa-fw"></i>归档</a></li>
        <li class="menu-item menu-item-future"><a href="/future/" rel="section"><i class="sitemap fa-fw"></i>├ 动态</a></li>
        <li class="menu-item menu-item-nas"><a href="/nas/" rel="section"><i class="sitemap fa-fw"></i>├ NAS</a></li>
        <li class="menu-item menu-item-life"><a href="/life/" rel="section"><i class="sitemap fa-fw"></i>├ 生活</a></li>
        <li class="menu-item menu-item-career"><a href="/career/" rel="section"><i class="sitemap fa-fw"></i>└ 技术</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="tags fa-fw"></i>标签</a></li>
        <li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="user fa-fw"></i>关于</a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">nuniok</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">106</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">88</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/nuniok" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;nuniok" rel="noopener" target="_blank"><i class="github fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:nuniok@163.com" title="E-Mail → mailto:nuniok@163.com" rel="noopener" target="_blank"><i class="envelope fa-fw"></i></a>
      </span>
  </div>



        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="返回顶部">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="reading-progress-bar"></div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://noge.top/2015/09/19/1.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="nuniok">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="码力欧">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2015/09/19/1.html" class="post-title-link" itemprop="url">Python 包管理</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2015-09-19 00:00:00" itemprop="dateCreated datePublished" datetime="2015-09-19T00:00:00+00:00">2015-09-19</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="pip"><a href="#pip" class="headerlink" title="pip"></a>pip</h2><p>pip更新<code>python -m pip install -U pip</code></p>
<h3 id="pipy国内镜像目前有："><a href="#pipy国内镜像目前有：" class="headerlink" title="pipy国内镜像目前有："></a>pipy国内镜像目前有：</h3><p><a target="_blank" rel="noopener" href="https://pypi.douban.com/">https://pypi.douban.com/</a>  豆瓣</p>
<p><a target="_blank" rel="noopener" href="https://mirrors.tuna.tsinghua.edu.cn/pypi/web/">https://mirrors.tuna.tsinghua.edu.cn/pypi/web/</a> 清华大学</p>
<h3 id="指定源安装"><a href="#指定源安装" class="headerlink" title="指定源安装"></a>指定源安装</h3><p>pip可以通过指定源的方式安装 <code>pip install web.py -i https://pypi.douban.com/simple</code></p>
<p>也可以通过修改配置文件，Linux的文件在<code>~/.pip/pip.conf</code>，Windows在<code>%HOMEPATH%\pip\pip.ini</code>。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[global]</span><br><span class="line">index-url = https://pypi.douban.com/simple</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="easy-install"><a href="#easy-install" class="headerlink" title="easy_install"></a>easy_install</h2><p>easy_install指定源安装 <code>easy_install -i https://pypi.douban.com/simple</code></p>
<p>或者修改配置文件 <code>~/.pydistutils.cfg</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[easy_install]</span><br><span class="line">index_url = http://e.pypi.python.org/simple</span><br></pre></td></tr></table></figure>

<p>easy_install查看包的版本</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">root@xyz-pc:~# easy_install tornado -v</span><br><span class="line">Searching for tornado</span><br><span class="line">Best match: tornado 4.0.2</span><br><span class="line">tornado 4.0.2 is already the active version in easy-install.pth</span><br><span class="line"></span><br><span class="line">Using /usr/lib/python2.7/dist-packages</span><br><span class="line">Processing dependencies for tornado</span><br><span class="line">Finished processing dependencies for tornado</span><br><span class="line">Searching for -v</span><br><span class="line">Reading https://pypi.python.org/simple/-v/</span><br><span class="line">Couldn&#x27;t find index page for &#x27;-v&#x27; (maybe misspelled?)</span><br><span class="line">Scanning index of all packages (this may take a while)</span><br><span class="line">Reading https://pypi.python.org/simple/</span><br><span class="line">No local packages or download links found for -v</span><br><span class="line">error: Could not find suitable distribution for Requirement.parse(&#x27;-v&#x27;)</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="安装Python安装包管理工具相关命令"><a href="#安装Python安装包管理工具相关命令" class="headerlink" title="安装Python安装包管理工具相关命令"></a>安装Python安装包管理工具相关命令</h2><p>安装easy_install：<code>apt-get install python-setuptools</code></p>
<p><code>sudo yum install python-setuptools-devel</code></p>
<p><code>esay_install pip</code></p>
<p>pip指定版本：<code>pip install &#39;pymongo&lt;2.8&#39;</code></p>
<p>升级版本：<code>pip install --upgrade pymongo</code></p>
<p>查看已安装包：<code>pip show --files SomePackage</code></p>
<p>查看需要更新的包：<code>pip list --outdated</code></p>
<p>卸载包：<code>pip uninstall SomePackage</code></p>
<p>帮助：<code>pip --help</code></p>
<p>指定豆瓣源安装：<code>pip install -i https://pypi.douban.com/simple/ functools32</code></p>
<p>查看已安装包：<code>pip list</code></p>
<blockquote>
<p><a target="_blank" rel="noopener" href="http://www.cnblogs.com/taosim/articles/3288821.html">http://www.cnblogs.com/taosim/articles/3288821.html</a></p>
</blockquote>
<h2 id="pipenv"><a href="#pipenv" class="headerlink" title="pipenv"></a>pipenv</h2><p>安装 <code>pip3 install pipenv</code></p>
<p>安装虚拟环境 <code>pipenv install</code></p>
<p>启动虚拟环境 <code>pipenv shell</code></p>
<p>查看当前环境依赖 <code>pip3 list</code></p>
<p>退出虚拟环境 <code>exit</code></p>
<p>安装 <code>pipenv install ……</code></p>
<p>卸载 <code>pipenv uninstall ……</code></p>
<p>查看依赖关系 <code>pipenv graph</code></p>
<p>查看虚拟环境路径 <code>pipenv --venv</code></p>
<p>删除环境 <code>pipenv --rm</code></p>
<p>创建 Python3 环境 <code>pipenv --three</code></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://noge.top/2015/08/14/1.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="nuniok">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="码力欧">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2015/08/14/1.html" class="post-title-link" itemprop="url">Git使用一年总结</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2015-08-14 00:00:00" itemprop="dateCreated datePublished" datetime="2015-08-14T00:00:00+00:00">2015-08-14</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h5 id="git-fetch-merge"><a href="#git-fetch-merge" class="headerlink" title="git fetch merge"></a>git fetch merge</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git remote -vv</span><br><span class="line">git remote add base git@git.in.xxx.com:sss/xxx.git</span><br><span class="line">git fetch base</span><br><span class="line">git merge base/master</span><br></pre></td></tr></table></figure>

<h5 id="git切换远程仓库地址"><a href="#git切换远程仓库地址" class="headerlink" title="git切换远程仓库地址"></a>git切换远程仓库地址</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote set-url origin [url]</span><br></pre></td></tr></table></figure>

<h5 id="使用git在本地创建一个项目的过程"><a href="#使用git在本地创建一个项目的过程" class="headerlink" title="使用git在本地创建一个项目的过程"></a>使用git在本地创建一个项目的过程</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ makdir ~/hello-world    //创建一个项目hello-world</span><br><span class="line">$ cd ~/hello-world       //打开这个项目</span><br><span class="line">$ git init             //初始化</span><br><span class="line">$ touch README</span><br><span class="line">$ git add README        //更新README文件</span><br><span class="line">$ git commit -m &#x27;first commit&#x27;     //提交更新，并注释信息“first commit”</span><br><span class="line">$ git remote add origin git@github.test/hellotest.git     //连接远程github项目</span><br><span class="line">$ git push -u origin master     //将本地项目更新到github项目上去</span><br></pre></td></tr></table></figure>

<hr>
<h5 id="git设置关闭自动换行"><a href="#git设置关闭自动换行" class="headerlink" title="git设置关闭自动换行"></a>git设置关闭自动换行</h5><p><code>git config --global core.autocrlf false</code><br>为了保证文件的换行符是以安全的方法，避免windows与unix的换行符混用的情况，最好也加上这么一句<br><code>git config --global core.safecrlf true</code></p>
<hr>
<h5 id="git-tag-使用"><a href="#git-tag-使用" class="headerlink" title="git tag 使用"></a>git tag 使用</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">git tag  # 列出当前仓库的所有标签</span><br><span class="line">git tag -l &#x27;v0.1.*&#x27;  # 搜索符合当前模式的标签</span><br><span class="line"></span><br><span class="line">git tag v0.2.1-light  # 创建轻量标签</span><br><span class="line">git tag -a v0.2.1 -m &#x27;0.2.1版本&#x27;  # 创建附注标签</span><br><span class="line"></span><br><span class="line">git checkout [tagname]  # 切换到标签</span><br><span class="line">git show v0.2.1  # 查看标签版本信息</span><br><span class="line"></span><br><span class="line">git tag -d v0.2.1  # 删除标签</span><br><span class="line">git tag -a v0.2.1 9fbc3d0  # 补打标签</span><br><span class="line"></span><br><span class="line">git push origin v0.1.2  # 将v0.1.2标签提交到git服务器</span><br><span class="line">git push origin –tags  # 将本地所有标签一次性提交到git服务器</span><br><span class="line">git tag  # 查看当前分支下的标签</span><br></pre></td></tr></table></figure>


<hr>
<h5 id="git-pull问题"><a href="#git-pull问题" class="headerlink" title="git pull问题"></a>git pull问题</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">You asked me to pull without telling me which branch you</span><br><span class="line">want to merge with, and &#x27;branch.content_api_zhangxu.merge&#x27; in</span><br><span class="line">your configuration file does not tell me, either. Please</span><br><span class="line">specify which branch you want to use on the command line and</span><br><span class="line">try again (e.g. &#x27;git pull &lt;repository&gt; &lt;refspec&gt;&#x27;).</span><br><span class="line">See git-pull(1) for details.</span><br><span class="line"></span><br><span class="line">If you often merge with the same branch, you may want to</span><br><span class="line">use something like the following in your configuration file:</span><br><span class="line"></span><br><span class="line">    [branch &quot;content_api_zhangxu&quot;]</span><br><span class="line">    remote = &lt;nickname&gt;</span><br><span class="line">    merge = &lt;remote-ref&gt;</span><br><span class="line"></span><br><span class="line">    [remote &quot;&lt;nickname&gt;&quot;]</span><br><span class="line">    url = &lt;url&gt;</span><br><span class="line">    fetch = &lt;refspec&gt;</span><br><span class="line"></span><br><span class="line">See git-config(1) for details.</span><br></pre></td></tr></table></figure>
<p><code>git pull origin new_branch</code></p>
<hr>
<h5 id="怎样遍历移除项目中的所有-pyc-文件"><a href="#怎样遍历移除项目中的所有-pyc-文件" class="headerlink" title="怎样遍历移除项目中的所有 .pyc 文件"></a>怎样遍历移除项目中的所有 .pyc 文件</h5><p><code>sudo find /tmp -name &quot;*.pyc&quot; | xargs rm -rf</code>替换<code>/tmp</code>目录为工作目录<br><code>git rm *.pyc</code>这个用着也可以</p>
<p>避免再次误提交，在项目新建<code>.gitignore</code>文件，输入<code>*.pyc</code>过滤文件</p>
<hr>
<h5 id="git变更项目地址"><a href="#git变更项目地址" class="headerlink" title="git变更项目地址"></a>git变更项目地址</h5><p><code>git remote set-url origin git@192.168.6.70:res_dev_group/test.git</code><br><code>git remote -v</code></p>
<hr>
<h5 id="查看某个文件的修改历史"><a href="#查看某个文件的修改历史" class="headerlink" title="查看某个文件的修改历史"></a>查看某个文件的修改历史</h5><p><code>git log --pretty=oneline 文件名   # 显示修改历史</code><br><code>git show 356f6def9d3fb7f3b9032ff5aa4b9110d4cca87e  # 查看更改</code></p>
<hr>
<h5 id="git-push-时报错-warning-push-default-is-unset"><a href="#git-push-时报错-warning-push-default-is-unset" class="headerlink" title="git push 时报错 warning: push.default is unset"></a>git push 时报错 warning: push.default is unset</h5><p>git_push.jpg<br>‘matching’ 参数是 Git 1.x 的默认行为，其意是如果你执行 git push 但没有指定分支，它将 push 所有你本地的分支到远程仓库中对应匹配的分支。而 Git 2.x 默认的是 simple，意味着执行 git push 没有指定分支时，只有当前分支会被 push 到你使用 git pull 获取的代码。<br>根据提示，修改git push的行为:<br>git config –global push.default matching<br>再次执行git push 得到解决。</p>
<hr>
<h5 id="git-submodule的使用拉子项目代码"><a href="#git-submodule的使用拉子项目代码" class="headerlink" title="git submodule的使用拉子项目代码"></a>git submodule的使用拉子项目代码</h5><p>开发过程中，经常会有一些通用的部分希望抽取出来做成一个公共库来提供给别的工程来使用，而公共代码库的版本管理是个麻烦的事情。今天无意中发现了git的<code>git submodule</code>命令，之前的问题迎刃而解了。<br>添加</p>
<p>为当前工程添加submodule，命令如下：</p>
<p><code>git submodule add 仓库地址 路径</code></p>
<p>其中，仓库地址是指子模块仓库地址，路径指将子模块放置在当前工程下的路径。<br>注意：路径不能以 &#x2F; 结尾（会造成修改不生效）、不能是现有工程已有的目录（不能順利 Clone）</p>
<p>命令执行完成，会在当前工程根路径下生成一个名为“.gitmodules”的文件，其中记录了子模块的信息。添加完成以后，再将子模块所在的文件夹添加到工程中即可。<br>删除</p>
<p>submodule的删除稍微麻烦点：首先，要在“.gitmodules”文件中删除相应配置信息。然后，执行<code>git rm –cached</code>命令将子模块所在的文件从git中删除。<br>下载的工程带有submodule</p>
<p>当使用<code>git clone</code>下来的工程中带有submodule时，初始的时候，submodule的内容并不会自动下载下来的，此时，只需执行如下命令：</p>
<p><code>git submodule update --init --recursive</code></p>
<p>即可将子模块内容下载下来后工程才不会缺少相应的文件。</p>
<hr>
<h5 id="一些错误"><a href="#一些错误" class="headerlink" title="一些错误"></a>一些错误</h5><h6 id="“pathspec-‘branch’-did-not-match-any-file-s-known-to-git-”错误"><a href="#“pathspec-‘branch’-did-not-match-any-file-s-known-to-git-”错误" class="headerlink" title="“pathspec ‘branch’ did not match any file(s) known to git.”错误"></a>“pathspec ‘branch’ did not match any file(s) known to git.”错误</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git checkout master</span><br><span class="line">git pull</span><br><span class="line">git checkout new_branch</span><br></pre></td></tr></table></figure>

<h6 id="使用git提交比较大的文件的时候可能会出现这个错误"><a href="#使用git提交比较大的文件的时候可能会出现这个错误" class="headerlink" title="使用git提交比较大的文件的时候可能会出现这个错误"></a>使用git提交比较大的文件的时候可能会出现这个错误</h6><p>error: RPC failed; result&#x3D;22, HTTP code &#x3D; 411<br>fatal: The remote end hung up unexpectedly<br>fatal: The remote end hung up unexpectedly<br>Everything up-to-date</p>
<p>这样的话首先改一下git的传输字节限制</p>
<p>git config http.postBuffer  524288000<br>然后这时候在传输或许会出现另一个错误</p>
<p>error: RPC failed; result&#x3D;22, HTTP code &#x3D; 413<br>fatal: The remote end hung up unexpectedly<br>fatal: The remote end hung up unexpectedly<br>Everything up-to-date</p>
<p>这两个错误看上去相似，一个是411，一个是413</p>
<p>下面这个错误添加一下密钥就可以了</p>
<p>首先key-keygen 生成密钥</p>
<p>然后把生成的密钥复制到git中自己的账号下的相应位置</p>
<p>git push ssh:&#x2F;&#x2F;192.168.64.250&#x2F;eccp.git  branch</p>
<blockquote>
<p>等待收集</p>
</blockquote>
<hr>
<h5 id="git-add文件取消"><a href="#git-add文件取消" class="headerlink" title="git add文件取消"></a>git add文件取消</h5><p>在git的一般使用中，如果发现错误的将不想提交的文件add进入index之后，想回退取消，则可以使用命令：<code>git reset HEAD &lt;file&gt;...</code>，同时git add完毕之后，git也会做相应的提示。</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="http://blog.csdn.net/yaoming168/article/details/38777763">http://blog.csdn.net/yaoming168/article/details/38777763</a></p>
</blockquote>
<hr>
<h5 id="git删除文件："><a href="#git删除文件：" class="headerlink" title="git删除文件："></a>git删除文件：</h5><p>删除文件跟踪并且删除文件系统中的文件file1<code>git rm file1</code><br>提交刚才的删除动作，之后git不再管理该文件<code>git commit</code></p>
<p>删除文件跟踪但不删除文件系统中的文件file1<code>git rm --cached file1</code><br>提交刚才的删除动作，之后git不再管理该文件。但是文件系统中还是有file1。<code>git commit</code></p>
<hr>
<h5 id="版本回退"><a href="#版本回退" class="headerlink" title="版本回退"></a>版本回退</h5><p>版本回退用于线上系统出现问题后恢复旧版本的操作。<br>回退到的版本<code>git reset --hard 248cba8e77231601d1189e3576dc096c8986ae51</code><br>回退的是所有文件，如果后悔回退可以git pull就可以了。</p>
<hr>
<h5 id="历史版本对比"><a href="#历史版本对比" class="headerlink" title="历史版本对比"></a>历史版本对比</h5><p>查看日志<code>git log</code><br>查看某一历史版本的提交内容<code>git show  4ebd4bbc3ed321d01484a4ed206f18ce2ebde5ca</code>，这里能看到版本的详细修改代码。<br>对比不同版本<code>git diff c0f28a2ec490236caa13dec0e8ea826583b49b7a  2e476412c34a63b213b735e5a6d90cd05b014c33</code></p>
<blockquote>
<p><a target="_blank" rel="noopener" href="http://blog.csdn.net/lxlzhn/article/details/9356473">http://blog.csdn.net/lxlzhn/article/details/9356473</a></p>
</blockquote>
<hr>
<h5 id="分支的意义与管理"><a href="#分支的意义与管理" class="headerlink" title="分支的意义与管理"></a>分支的意义与管理</h5><p>创建分支可以避免提交代码后对主分支的影响，同时也使你有了相对独立的开发环境。分支具有很重要的意义。<br>创建并切换分支，提交代码后才能在其它机器拉分支代码<code>git checkout -b new_branch</code><br>查看当前分支<code>git branch</code><br>切换到master分支<code>git checkout master</code><br>合并分支到当前分支<code>git merge new_branch</code>，合并分支的操作是从new_branch合并到master分支，当前环境在master分支。<br>删除分支<code>git branch -d new_branch</code></p>
<hr>
<h5 id="git冲突文件编辑"><a href="#git冲突文件编辑" class="headerlink" title="git冲突文件编辑"></a>git冲突文件编辑</h5><p>冲突文件冲突的地方如下面这样</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">a123</span><br><span class="line">&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</span><br><span class="line">b789</span><br><span class="line">=======</span><br><span class="line">b45678910</span><br><span class="line">&gt;&gt;&gt;&gt;&gt;&gt;&gt; 6853e5ff961e684d3a6c02d4d06183b5ff330dcc</span><br><span class="line">c</span><br></pre></td></tr></table></figure>
<p>冲突标记&lt;&lt;&lt;&lt;&lt;&lt;&lt; （7个&lt;）与&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;之间的内容是我的修改，&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;与&gt;&gt;&gt;&gt;&gt;&gt;&gt;之间的内容是别人的修改。<br>此时，还没有任何其它垃圾文件产生。<br>你需要把代码合并好后重新走一遍代码提交流程就好了。</p>
<hr>
<h5 id="不顺利的代码提交流程"><a href="#不顺利的代码提交流程" class="headerlink" title="不顺利的代码提交流程"></a>不顺利的代码提交流程</h5><p>在<code>git push</code>后出现错误可能是因为其他人提交了代码，而使你的本地代码库版本不是最新。<br>这时你需要先<code>git pull</code>代码后，检查是否有文件冲突。<br>没有文件冲突的话需要重新走一遍代码提交流程<code>add —&gt; commit —&gt; push</code>。<br>解决文件冲突在后面说。</p>
<hr>
<h5 id="git顺利的提交代码流程"><a href="#git顺利的提交代码流程" class="headerlink" title="git顺利的提交代码流程"></a>git顺利的提交代码流程</h5><p>查看修改的文件<code>git status</code>；<br>为了谨慎检查一下代码<code>git diff</code>；<br>添加修改的文件<code>git add dirname1/filename1.py dirname2/filenam2.py</code>，新加的文件也是直接add就好了；<br>添加修改的日志<code>git commit -m &quot;fixed:修改了上传文件的逻辑&quot;</code>；<br>提交代码<code>git push</code>，如果提交失败的可能原因是本地代码库版本不是最新。</p>
<hr>
<h5 id="理解github的pull-request"><a href="#理解github的pull-request" class="headerlink" title="理解github的pull request"></a>理解github的pull request</h5><h6 id="有一个仓库，叫Repo-A。你如果要往里贡献代码，首先要Fork这个Repo，于是在你的Github账号下有了一个Repo-A2-。然后你在这个A2下工作，Commit，push等。然后你希望原始仓库Repo-A合并你的工作，你可以在Github上发起一个Pull-Request，意思是请求Repo-A的所有者从你的A2合并分支。如果被审核通过并正式合并，这样你就为项目A做贡献了。"><a href="#有一个仓库，叫Repo-A。你如果要往里贡献代码，首先要Fork这个Repo，于是在你的Github账号下有了一个Repo-A2-。然后你在这个A2下工作，Commit，push等。然后你希望原始仓库Repo-A合并你的工作，你可以在Github上发起一个Pull-Request，意思是请求Repo-A的所有者从你的A2合并分支。如果被审核通过并正式合并，这样你就为项目A做贡献了。" class="headerlink" title="有一个仓库，叫Repo A。你如果要往里贡献代码，首先要Fork这个Repo，于是在你的Github账号下有了一个Repo A2,。然后你在这个A2下工作，Commit，push等。然后你希望原始仓库Repo A合并你的工作，你可以在Github上发起一个Pull Request，意思是请求Repo A的所有者从你的A2合并分支。如果被审核通过并正式合并，这样你就为项目A做贡献了。"></a>有一个仓库，叫Repo A。你如果要往里贡献代码，首先要Fork这个Repo，于是在你的Github账号下有了一个Repo A2,。然后你在这个A2下工作，Commit，push等。然后你希望原始仓库Repo A合并你的工作，你可以在Github上发起一个Pull Request，意思是请求Repo A的所有者从你的A2合并分支。如果被审核通过并正式合并，这样你就为项目A做贡献了。</h6><blockquote>
<p><a target="_blank" rel="noopener" href="http://zhidao.baidu.com/question/1669154493305991627.html">http://zhidao.baidu.com/question/1669154493305991627.html</a></p>
</blockquote>
<hr>
<h5 id="创建和使用git-ssh-key"><a href="#创建和使用git-ssh-key" class="headerlink" title="创建和使用git ssh key"></a>创建和使用git ssh key</h5><p>首先设置git的user name和email：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name &quot;xxx&quot;</span><br><span class="line">git config --global user.email &quot;xxx@gmail.com&quot;</span><br></pre></td></tr></table></figure>
<p>查看git配置：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --list</span><br></pre></td></tr></table></figure>
<h6 id="然后生成SHH密匙："><a href="#然后生成SHH密匙：" class="headerlink" title="然后生成SHH密匙："></a>然后生成SHH密匙：</h6><p>查看是否已经有了ssh密钥：<code>cd ~/.ssh</code><br>如果没有密钥则不会有此文件夹，有则备份删除<br>生存密钥：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -C &quot;gudujianjsk@gmail.com&quot;</span><br></pre></td></tr></table></figure>
<p>按3个回车，密码为空这里一般不使用密钥。<br>最后得到了两个文件：id_rsa和id_rsa.pub<br>注意：密匙生成就不要改了，如果已经生成到<code>~/.ssh</code>文件夹下去找。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// 暂时无用</span><br><span class="line">添加 私密钥 到ssh：ssh-add id_rsa</span><br><span class="line">需要之前输入密码（如果有）。</span><br><span class="line"></span><br><span class="line">在github上添加ssh密钥，这要添加的是“id_rsa.pub”里面的公钥。</span><br><span class="line">打开 http://github.com,登陆xushichao，然后添加ssh。</span><br><span class="line">注意在这里由于直接复制粘帖公钥，可能会导致增加一些字符或者减少些字符，最好用系统工具xclip来做这些事情。</span><br><span class="line">xclip -selection c  id_rsa.pub</span><br></pre></td></tr></table></figure>

<blockquote>
<p>应用流程未整理</p>
</blockquote>
<hr>
<h6 id="网络上收集"><a href="#网络上收集" class="headerlink" title="网络上收集"></a>网络上收集</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">master : 默认开发分支； origin : 默认远程版本库</span><br><span class="line"></span><br><span class="line">初始化操作</span><br><span class="line">    $ git config -global user.name &lt;name&gt;  #设置提交者名字</span><br><span class="line">    $ git config -global user.email &lt;email&gt;  #设置提交者邮箱</span><br><span class="line">    $ git config -global core.editor &lt;editor&gt;  #设置默认文本编辑器</span><br><span class="line">    $ git config -global merge.tool &lt;tool&gt;  #设置解决合并冲突时差异分析工具</span><br><span class="line">    $ git config -list  #检查已有的配置信息</span><br><span class="line"></span><br><span class="line">创建新版本库</span><br><span class="line">    $ git clone &lt;url&gt;  #克隆远程版本库</span><br><span class="line">    $ git init  #初始化本地版本库</span><br><span class="line"></span><br><span class="line">修改和提交</span><br><span class="line">    $ git add .  #添加所有改动过的文件</span><br><span class="line">    $ git add &lt;file&gt;  #添加指定的文件</span><br><span class="line">    $ git mv &lt;old&gt; &lt;new&gt; #文件重命名</span><br><span class="line">    $ git rm &lt;file&gt;  #删除文件</span><br><span class="line">    $ git rm -cached &lt;file&gt;  #停止跟踪文件但不删除</span><br><span class="line">    $ git commit -m &lt;file&gt; #提交指定文件</span><br><span class="line">    $ git commit -m “commit message”  #提交所有更新过的文件</span><br><span class="line">    $ git commit -amend  #修改最后一次提交</span><br><span class="line">    $ git commit -C HEAD -a -amend  #增补提交（不会产生新的提交历史纪录）</span><br><span class="line"></span><br><span class="line">查看提交历史</span><br><span class="line">    $ git log  #查看提交历史</span><br><span class="line">    $ git log -p &lt;file&gt;  #查看指定文件的提交历史</span><br><span class="line">    $ git blame &lt;file&gt;  #以列表方式查看指定文件的提交历史</span><br><span class="line">    $ gitk  #查看当前分支历史纪录</span><br><span class="line">    $ gitk &lt;branch&gt; #查看某分支历史纪录</span><br><span class="line">    $ gitk --all  #查看所有分支历史纪录</span><br><span class="line">    $ git branch -v  #每个分支最后的提交</span><br><span class="line">    $ git status  #查看当前状态</span><br><span class="line">    $ git diff  #查看变更内容</span><br><span class="line"></span><br><span class="line">撤消操作</span><br><span class="line">    $ git reset -hard HEAD  #撤消工作目录中所有未提交文件的修改内容</span><br><span class="line">    $ git checkout HEAD &lt;file1&gt; &lt;file2&gt;  #撤消指定的未提交文件的修改内容</span><br><span class="line">    $ git checkout HEAD. #撤消所有文件</span><br><span class="line">    $ git revert &lt;commit&gt;  #撤消指定的提交</span><br><span class="line"></span><br><span class="line">分支与标签</span><br><span class="line">    $ git branch  #显示所有本地分支</span><br><span class="line">    $ git checkout &lt;branch/tagname&gt;  #切换到指定分支或标签</span><br><span class="line">    $ git branch &lt;new-branch&gt;  #创建新分支</span><br><span class="line">    $ git branch -d &lt;branch&gt;  #删除本地分支</span><br><span class="line">    $ git tag  #列出所有本地标签</span><br><span class="line">    $ git tag &lt;tagname&gt;  #基于最新提交创建标签</span><br><span class="line">    $ git tag -d &lt;tagname&gt;  #删除标签</span><br><span class="line"></span><br><span class="line">合并与衍合</span><br><span class="line">    $ git merge &lt;branch&gt;  #合并指定分支到当前分支</span><br><span class="line">    $ git rebase &lt;branch&gt;  #衍合指定分支到当前分支</span><br><span class="line"></span><br><span class="line">远程操作</span><br><span class="line">    $ git remote -v  #查看远程版本库信息</span><br><span class="line">    $ git remote show &lt;remote&gt;  #查看指定远程版本库信息</span><br><span class="line">    $ git remote add &lt;remote&gt; &lt;url&gt;  #添加远程版本库</span><br><span class="line">    $ git fetch &lt;remote&gt;  #从远程库获取代码</span><br><span class="line">    $ git pull &lt;remote&gt; &lt;branch&gt;  #下载代码及快速合并</span><br><span class="line">    $ git push &lt;remote&gt; &lt;branch&gt;  #上传代码及快速合并</span><br><span class="line">    $ git push &lt;remote&gt; : &lt;branch&gt;/&lt;tagname&gt;  #删除远程分支或标签</span><br><span class="line">    $ git push -tags  #上传所有标签</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://noge.top/2015/08/07/1.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="nuniok">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="码力欧">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2015/08/07/1.html" class="post-title-link" itemprop="url">Supervisord总结</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2015-08-07 00:00:00" itemprop="dateCreated datePublished" datetime="2015-08-07T00:00:00+00:00">2015-08-07</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h2><p>一、添加好配置文件后<br>二、更新新的配置到supervisord<br><code>supervisorctl update</code><br>三、重新启动配置中的所有程序<br><code>supervisorctl reload</code><br>四、启动某个进程(program_name&#x3D;你配置中写的程序名称)<br><code>supervisorctl start program_name</code><br>五、查看正在守候的进程<br><code>supervisorctl</code><br>六、停止某一进程 (program_name&#x3D;你配置中写的程序名称)<br><code>pervisorctl stop program_name</code><br>七、重启某一进程 (program_name&#x3D;你配置中写的程序名称)<br><code>supervisorctl restart program_name</code><br>八、停止全部进程<br><code>supervisorctl stop all</code><br>注意：显示用stop停止掉的进程，用reload或者update都不会自动重启。</p>
<p>supervisord : supervisor的服务器端部分，启动supervisor就是运行这个命令。<br>supervisorctl：启动supervisor的命令行窗口。</p>
<hr>
<p>需求：redis-server这个进程是运行redis的服务。我们要求这个服务能在意外停止后自动重启。</p>
<h2 id="安装（Centos）"><a href="#安装（Centos）" class="headerlink" title="安装（Centos）"></a>安装（Centos）</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum install python-setuptools</span><br><span class="line">easy_install supervisor</span><br></pre></td></tr></table></figure>

<p>测试是否安装成功：<br><code>echo_supervisord_conf</code></p>
<p>创建配置文件：<br><code>echo_supervisord_conf &gt; /etc/supervisord.conf</code></p>
<p>修改配置文件，在supervisord.conf最后增加：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[program:redis]</span><br><span class="line">command = redis-server   //需要执行的命令</span><br><span class="line">autostart=true    //supervisor启动的时候是否随着同时启动</span><br><span class="line">autorestart=true   //当程序跑出exit的时候，这个program会自动重启</span><br><span class="line">startsecs=3  //程序重启时候停留在runing状态的秒数</span><br></pre></td></tr></table></figure>

<p>环境变量配置：</p>
<p><code>environment=PATH=&quot;/usr/local/cuda-8.0/bin:/usr/local/cuda-8.0/lib64&quot;,LD_LIBRARY_PATH=&quot;/usr/local/cuda-8.0/lib64:$LD_LIBRARY_PATH&quot;</code></p>
<blockquote>
<p>更多配置说明请参考：<a target="_blank" rel="noopener" href="http://supervisord.org/configuration.html">http://supervisord.org/configuration.html</a></p>
</blockquote>
<p>运行命令：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">supervisord    //启动supervisor</span><br><span class="line">supervisorctl   //打开命令行</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@vm14211 ~]# supervisorctl</span><br><span class="line">redis                            RUNNING    pid 24068, uptime 3:41:55</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ctl中： help   //查看命令 </span><br><span class="line">ctl中： status  //查看状态</span><br></pre></td></tr></table></figure>

<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><ol>
<li><p>redis出现的不是running而是FATAL 状态<br>应该要去查看log<br>log在&#x2F;tmp&#x2F;supervisord.log</p>
</li>
<li><p>日志中显示：<br>gave up: redis entered FATAL state, too many start retries too quickly<br>修改redis.conf的daemonize为no</p>
<blockquote>
<p>具体说明：<a target="_blank" rel="noopener" href="http://xingqiba.sinaapp.com/?p=240">http://xingqiba.sinaapp.com/?p=240</a></p>
</blockquote>
</li>
</ol>
<p>事实证明webdis也有这个问题，webdis要修改的是webdis.json这个配置文件</p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><blockquote>
<p><a target="_blank" rel="noopener" href="http://www.cnblogs.com/yjf512/archive/2012/03/05/2380496.html">http://www.cnblogs.com/yjf512/archive/2012/03/05/2380496.html</a></p>
</blockquote>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://noge.top/2015/07/18/1.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="nuniok">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="码力欧">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2015/07/18/1.html" class="post-title-link" itemprop="url">分布式系统常用指标</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2015-07-18 00:00:00" itemprop="dateCreated datePublished" datetime="2015-07-18T00:00:00+00:00">2015-07-18</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="性能指标"><a href="#性能指标" class="headerlink" title="性能指标"></a>性能指标</h2><ol>
<li>吞度量</li>
<li>响应延迟 P95 P999</li>
<li>并发量</li>
</ol>
<h2 id="可用性指标"><a href="#可用性指标" class="headerlink" title="可用性指标"></a>可用性指标</h2><ol>
<li>可提供的服务时间 &#x2F; (可提供的服务时间 + 不可提供的服务时间)</li>
<li>请求成功次数 &#x2F; 总请求次数</li>
</ol>
<h2 id="可扩展性指标"><a href="#可扩展性指标" class="headerlink" title="可扩展性指标"></a>可扩展性指标</h2><p>是否能实现水平扩展，通过增加服务器数量增加计算能力、存储容量等。</p>
<p>存储系统中有两种扩展方式：<br>Scale Out（也就是Scale horizontally）横向扩展，比如在原有系统中新增一台服务器。<br>Scale Up（也就是Scale vertically）纵向扩展，在原有机器上增加 CPU 、内存。</p>
<h2 id="一致性指标"><a href="#一致性指标" class="headerlink" title="一致性指标"></a>一致性指标</h2><p>实现多副本之间一致性的能力。不同的应用场景对于数据一致性指标要求不同，需要根据场景做具体的评估。</p>
<h2 id="水平拆分和垂直拆分"><a href="#水平拆分和垂直拆分" class="headerlink" title="水平拆分和垂直拆分"></a>水平拆分和垂直拆分</h2><h2 id="ACID"><a href="#ACID" class="headerlink" title="ACID"></a>ACID</h2><p>原子性（Atomicity）<br>一致性（Atomicity）<br>隔离性（Isolation）<br>持久性（Durability）</p>
<h2 id="CAP（帽子理论）"><a href="#CAP（帽子理论）" class="headerlink" title="CAP（帽子理论）"></a>CAP（帽子理论）</h2><p>一致性（Consistency）<br>可用性（Availability）<br>可靠性（Partition tolerance 分区容错性）</p>
<h2 id="BASE"><a href="#BASE" class="headerlink" title="BASE"></a>BASE</h2><p>基本可用（Basically Available）<br>软状态（Soft State）<br>最终一致（Eventually Consistent）</p>
<h2 id="分布式一致性协议"><a href="#分布式一致性协议" class="headerlink" title="分布式一致性协议"></a>分布式一致性协议</h2><p>TX协议<br>XA协议</p>
<h2 id="两阶段提交协议"><a href="#两阶段提交协议" class="headerlink" title="两阶段提交协议"></a>两阶段提交协议</h2><h2 id="三阶段提交协议"><a href="#三阶段提交协议" class="headerlink" title="三阶段提交协议"></a>三阶段提交协议</h2><h2 id="TCC"><a href="#TCC" class="headerlink" title="TCC"></a>TCC</h2><h2 id="最终一致性模式"><a href="#最终一致性模式" class="headerlink" title="最终一致性模式"></a>最终一致性模式</h2>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://noge.top/2015/06/12/1.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="nuniok">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="码力欧">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2015/06/12/1.html" class="post-title-link" itemprop="url">Crontab计划任务</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2015-06-12 00:00:00" itemprop="dateCreated datePublished" datetime="2015-06-12T00:00:00+00:00">2015-06-12</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>编辑 Crontab 文件： <code>crontab -e</code></p>
<p>查看 Crontab 日志： <code>tail -100f /var/log/cron</code></p>
<p>基本格式 :</p>
<p><img src="/resource/img/crontab.png" alt="Crontab"></p>
<p><code>*　　*　　*　　*　　*　　command</code></p>
<p>分　时　日　月　周　命令</p>
<p>第1列表示分钟1～59 每分钟用*或者 *&#x2F;1表示<br>第2列表示小时1～23（0表示0点）<br>第3列表示日期1～31<br>第4列表示月份1～12<br>第5列标识号星期0～6（0表示星期天）<br>第6列要运行的命令</p>
<h2 id="Crontab文件的一些例子："><a href="#Crontab文件的一些例子：" class="headerlink" title="Crontab文件的一些例子："></a>Crontab文件的一些例子：</h2><p><code>30 21 * * * /usr/local/etc/rc.d/lighttpd restart</code><br>上面的例子表示每晚的21:30重启apache</p>
<p><code>45 4 1,10,22 * * /usr/local/etc/rc.d/lighttpd restart</code><br>上面的例子表示每月1、10、22日的4 : 45重启apache</p>
<p><code>10 1 * * 6,0 /usr/local/etc/rc.d/lighttpd restart</code><br>上面的例子表示每周六、周日的1 : 10重启apache</p>
<p><code>0,30 18-23 * * * /usr/local/etc/rc.d/lighttpd restart</code><br>上面的例子表示在每天18 : 00至23 : 00之间每隔30分钟重启apache</p>
<p><code>0 23 * * 6 /usr/local/etc/rc.d/lighttpd restart</code><br>上面的例子表示每星期六的11 : 00 pm重启apache</p>
<p><code>* */1 * * * /usr/local/etc/rc.d/lighttpd restart</code><br>每一小时重启apache</p>
<p><code>* 23-7/1 * * * /usr/local/etc/rc.d/lighttpd restart</code><br>晚上11点到早上7点之间，每隔一小时重启apache</p>
<p><code>0 11 4 * mon-wed /usr/local/etc/rc.d/lighttpd restart</code><br>每月的4号与每周一到周三的11点重启apache</p>
<p><code>0 4 1 jan * /usr/local/etc/rc.d/lighttpd restart</code><br>一月一号的4点重启apache</p>
<h2 id="遇到的坑"><a href="#遇到的坑" class="headerlink" title="遇到的坑"></a>遇到的坑</h2><p><code>* 1 * * *</code> 这样写的话会每天1点的每分钟执行一次，需要写成 <code>0 1 * * *</code> 这样的形式</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://noge.top/2015/05/28/1.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="nuniok">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="码力欧">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2015/05/28/1.html" class="post-title-link" itemprop="url">Tornado学习总结</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2015-05-28 00:00:00" itemprop="dateCreated datePublished" datetime="2015-05-28T00:00:00+00:00">2015-05-28</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="框架"><a href="#框架" class="headerlink" title="框架"></a>框架</h2><p><img src="/resource/img/Tornado/tornado1.png" alt="原始图像"></p>
<h2 id="四层"><a href="#四层" class="headerlink" title="四层"></a>四层</h2><ul>
<li>WEB框架（处理器、模板、数据库连接、认证、本地化等）</li>
<li>HTTP&#x2F;HTTPS层（基于HTTP协议实现了HTTP服务器和客户端）</li>
<li>TCP层（TCP服务器，负责数据传输）</li>
<li>EVENT层（处理IO事件）</li>
</ul>
<p>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</p>
<h2 id="基础用法学习"><a href="#基础用法学习" class="headerlink" title="基础用法学习"></a>基础用法学习</h2><h3 id="请求处理程序和请求参数"><a href="#请求处理程序和请求参数" class="headerlink" title="请求处理程序和请求参数"></a>请求处理程序和请求参数</h3><p>程序将URL映射到tornado.web.RequestHandler的子类上去。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MainHandler</span>(tornado.web.RequestHandler):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get</span>(<span class="params">self</span>):</span><br><span class="line">        self.write(<span class="string">&quot;You requested the main page&quot;</span>)</span><br><span class="line"> </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">StoryHandler</span>(tornado.web.RequestHandler):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get</span>(<span class="params">self, story_id</span>):</span><br><span class="line">        self.write(<span class="string">&quot;You requested the story &quot;</span> + story_id)</span><br><span class="line"> </span><br><span class="line">application = tornado.web.Application([</span><br><span class="line">    (<span class="string">r&quot;/&quot;</span>, MainHandler),</span><br><span class="line">    (<span class="string">r&quot;/story/([0-9]+)&quot;</span>, StoryHandler),</span><br><span class="line">])</span><br></pre></td></tr></table></figure>
<p><code>get_argument()</code> 方法获取查询字符串参数。<br><code>self.request.files</code> 可以访问上传文件。<br><img src="/resource/img/Tornado/tornado2.png" alt="原始图像"></p>
<p>在继承类中通过 self.request.arguments.items() 方法获取所有返回对象。</p>
<h3 id="重写RequestHandler的方法函数"><a href="#重写RequestHandler的方法函数" class="headerlink" title="重写RequestHandler的方法函数"></a>重写RequestHandler的方法函数</h3><p>程序调用 initialize() 函数，这个函数的参数是 Application 配置中的关键字 参数定义。initialize 方法一般只是把传入的参数存 到成员变量中，而不会产生一些输出或者调用像 send_error 之类的方法。<br>程序调用 prepare()。无论使用了哪种 HTTP 方法，prepare 都会被调用到，因此 这个方法通常会被定义在一个基类中，然后在子类中重用。prepare可以产生输出 信息。如果它调用了finish（或send_error&#96; 等函数），那么整个处理流程 就此结束。<br>程序调用某个 HTTP 方法：例如 get()、post()、put() 等。如果 URL 的正则表达式模式中有分组匹配，那么相关匹配会作为参数传入方法，见下图：<br><img src="/resource/img/Tornado/tornado3.png" alt="原始图像"></p>
<p>见 code 1，RequestHandler中一些方法函数需要在其子类中重新定义<code>handler\base.py</code><br><img src="/resource/img/Tornado/tornado4.png" alt="原始图像"></p>
<p><code>get_current_user()</code> 处理获得当前用户</p>
<h3 id="重定向"><a href="#重定向" class="headerlink" title="重定向"></a>重定向</h3><p>通过 <code>self.redirect</code> 或 <code>RedirectHandler </code>。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">application = tornado.wsgi.WSGIApplication([</span><br><span class="line">    (<span class="string">r&quot;/([a-z]*)&quot;</span>, ContentHandler),</span><br><span class="line">    (<span class="string">r&quot;/static/tornado-0.2.tar.gz&quot;</span>, tornado.web.RedirectHandler,</span><br><span class="line">     <span class="built_in">dict</span>(url=<span class="string">&quot;http://github.com/downloads/facebook/tornado/tornado-0.2.tar.gz&quot;</span>)),</span><br><span class="line">], **settings)</span><br></pre></td></tr></table></figure>

<h3 id="模板"><a href="#模板" class="headerlink" title="模板"></a>模板</h3><p>模板支持 <code>&#123; % 控制语句 % &#125;</code>、<code>&#123; &#123; 表达式 &#125; &#125;</code><br>可以通过 extends 和 block 实现模板继承。</p>
<h3 id="Cookie和Cookie安全"><a href="#Cookie和Cookie安全" class="headerlink" title="Cookie和Cookie安全"></a>Cookie和Cookie安全</h3><p>通过下面方式加强安全性</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MainHandler</span>(tornado.web.RequestHandler):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> self.get_secure_cookie(<span class="string">&quot;mycookie&quot;</span>):</span><br><span class="line">            self.set_secure_cookie(<span class="string">&quot;mycookie&quot;</span>, <span class="string">&quot;myvalue&quot;</span>)</span><br><span class="line">            self.write(<span class="string">&quot;Your cookie was not set yet!&quot;</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            self.write(<span class="string">&quot;Your cookie was set!&quot;</span>)</span><br><span class="line"> </span><br><span class="line">application = tornado.web.Application([</span><br><span class="line">    (<span class="string">r&quot;/&quot;</span>, MainHandler),</span><br><span class="line">], cookie_secret=<span class="string">&quot;61oaBcAaaXQAGaYdkL5gEmGeJJFuYh7EQnp2XdTP1o/Vo=&quot;</span>)</span><br></pre></td></tr></table></figure>
<p>另一种配置写法：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MainHandler</span>(<span class="title class_ inherited__">BaseHandler</span>):</span><br><span class="line"><span class="meta">    @tornado.web.authenticated</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get</span>(<span class="params">self</span>):</span><br><span class="line">        name = tornado.escape.xhtml_escape(self.current_user)</span><br><span class="line">        self.write(<span class="string">&quot;Hello, &quot;</span> + name)</span><br><span class="line"> </span><br><span class="line">settings = &#123;</span><br><span class="line">    <span class="string">&quot;cookie_secret&quot;</span>: <span class="string">&quot;61oaBcAaaXQAGaYdkL5gEmGeJJFuYh7EQnp2XdTP1o/Vo=&quot;</span>,</span><br><span class="line">    <span class="string">&quot;login_url&quot;</span>: <span class="string">&quot;/login&quot;</span>,</span><br><span class="line">&#125;</span><br><span class="line">application = tornado.web.Application([</span><br><span class="line">    (<span class="string">r&quot;/&quot;</span>, MainHandler),</span><br><span class="line">    (<span class="string">r&quot;/login&quot;</span>, LoginHandler),</span><br><span class="line">], **settings)</span><br></pre></td></tr></table></figure>
<p><code>@tornado.web.authenticated</code> 用于用户认证<br><code>cookie_secret</code>用于加密cookie<br><code>login_url</code> 记录重定向地址<br><code>xsrf_cookies</code> 开关XSRF防范机制<br><img src="/resource/img/Tornado/tornado5.png" alt="原始图像"></p>
<h3 id="静态文件和主动式文件缓存"><a href="#静态文件和主动式文件缓存" class="headerlink" title="静态文件和主动式文件缓存"></a>静态文件和主动式文件缓存</h3><p><code>&quot;static_path&quot;: os.path.join(os.path.dirname(__file__), &quot;static&quot;)</code><br>static_url() 函数会将相对地址转成一个类似于 &#x2F;static&#x2F;images&#x2F;logo.png?v&#x3D;aae54 的 URI，v 参数是 logo.png 文件的散列值， Tornado 服务器会把它发给浏览器，并以此为依据让浏览器对相关内容做永久缓存。<br>由于 v 的值是基于文件的内容计算出来的，如果你更新了文件，或者重启了服务器 ，那么就会得到一个新的 v 值，这样浏览器就会请求服务器以获取新的文件内容。 如果文件的内容没有改变，浏览器就会一直使用本地缓存的文件，这样可以显著提高页 面的渲染速度。</p>
<h3 id="本地化"><a href="#本地化" class="headerlink" title="本地化"></a>本地化</h3><h3 id="UI模块"><a href="#UI模块" class="headerlink" title="UI模块"></a>UI模块</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">HomeHandler</span>(tornado.web.RequestHandler):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get</span>(<span class="params">self</span>):</span><br><span class="line">        entries = self.db.query(<span class="string">&quot;SELECT * FROM entries ORDER BY date DESC&quot;</span>)</span><br><span class="line">        self.render(<span class="string">&quot;home.html&quot;</span>, entries=entries)</span><br><span class="line"> </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">EntryHandler</span>(tornado.web.RequestHandler):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get</span>(<span class="params">self, entry_id</span>):</span><br><span class="line">        entry = self.db.get(<span class="string">&quot;SELECT * FROM entries WHERE id = %s&quot;</span>, entry_id)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> entry: <span class="keyword">raise</span> tornado.web.HTTPError(<span class="number">404</span>)</span><br><span class="line">        self.render(<span class="string">&quot;entry.html&quot;</span>, entry=entry)</span><br><span class="line"> </span><br><span class="line">settings = &#123;</span><br><span class="line">    <span class="string">&quot;ui_modules&quot;</span>: uimodules,</span><br><span class="line">&#125;</span><br><span class="line">application = tornado.web.Application([</span><br><span class="line">    (<span class="string">r&quot;/&quot;</span>, HomeHandler),</span><br><span class="line">    (<span class="string">r&quot;/entry/([0-9]+)&quot;</span>, EntryHandler),</span><br><span class="line">], **settings)</span><br><span class="line">&#123;% module Entry(entry, show_comments=<span class="literal">True</span>) %&#125;</span><br></pre></td></tr></table></figure>

<h3 id="非阻塞式异步请求"><a href="#非阻塞式异步请求" class="headerlink" title="非阻塞式异步请求"></a>非阻塞式异步请求</h3><p>Tornado 当中使用了 一种非阻塞式的 I&#x2F;O 模型，所以你可以改变这种默认的处理行为——让一个请求一直保持 连接状态，而不是马上返回，直到一个主处理行为返回。要实现这种处理方式，只需要 使用 tornado.web.asynchronous 装饰器就可以了。</p>
<h3 id="调试模式和自动重载"><a href="#调试模式和自动重载" class="headerlink" title="调试模式和自动重载"></a>调试模式和自动重载</h3><p>如果你将 debug&#x3D;True 传递给 Application 构造器，该 app 将以调试模式 运行。在调试模式下，模板将不会被缓存，而这个 app 会监视代码文件的修改， 如果发现修改动作，这个 app 就会被重新加载。在开发过程中，这会大大减少 手动重启服务的次数。然而有些问题（例如 import 时的语法错误）还是会让服务器 下线，目前的 debug 模式还无法避免这些情况。</p>
<p><a target="_blank" rel="noopener" href="http://demo.pythoner.com/itt2zh/index.html">参考地址</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://noge.top/2015/03/26/1.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="nuniok">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="码力欧">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2015/03/26/1.html" class="post-title-link" itemprop="url">分治策略之最大子数组问题</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2015-03-26 00:00:00" itemprop="dateCreated datePublished" datetime="2015-03-26T00:00:00+00:00">2015-03-26</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <ol>
<li>最简单直接的是暴利遍历数组可求得最大子数组，时间复杂度为O(n^2)</li>
<li>采用分治策略将数组分为两个子数组去求解右如下三种情况：<ul>
<li>最大子数组在左子数组中。</li>
<li>最大子数组在右子数组中。</li>
<li>最大子数组跨越两个子数组中。</li>
</ul>
</li>
</ol>
<p>重点在于求最大子数组跨越两个子数组的情况。<br>从数组的中间点为一定点向左和向右遍历分别求得最大子数组。<br>然后相加得跨越两个子数组的最大子数组。</p>
<p>然后采用递归的方法将左子数组和右子数组继续拆分，最后当左右子数组为一个元素时结束返回。</p>
<p>在递归的每一层中计算完三种情况后选取当下的最大子数组情况返回。</p>
<p>最后得到的结果便是连续最大子数组。</p>
<p>采用分治策略的时间复杂度为O(nlogn)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">import random</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def find_max_crossing_subarray(A, low, mid, high):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    求跨越两个数组的最大字数组</span><br><span class="line">    :param A:</span><br><span class="line">    :param low:</span><br><span class="line">    :param mid:</span><br><span class="line">    :param high:</span><br><span class="line">    :return:</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    left_sum = A[mid]</span><br><span class="line">    left_index = mid</span><br><span class="line">    sum = 0</span><br><span class="line">    for left in range(mid, low - 1, -1):</span><br><span class="line">        sum = sum + A[left]</span><br><span class="line">        if sum &gt; left_sum:</span><br><span class="line">            left_sum = sum</span><br><span class="line">            left_index = left</span><br><span class="line"></span><br><span class="line">    right_sum = A[mid + 1]</span><br><span class="line">    right_index = mid + 1</span><br><span class="line">    sum = 0</span><br><span class="line">    for right in range(mid + 1, high + 1):</span><br><span class="line">        sum = sum + A[right]</span><br><span class="line">        if sum &gt; right_sum:</span><br><span class="line">            right_sum = sum</span><br><span class="line">            right_index = right</span><br><span class="line">    return left_index, right_index, left_sum + right_sum</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def find_max_subarray(A, low, high):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    寻找数组中的最大子数组</span><br><span class="line">    :param A:</span><br><span class="line">    :param low:</span><br><span class="line">    :param high:</span><br><span class="line">    :return:</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    if low == high:</span><br><span class="line">        return low, high, A[low]</span><br><span class="line">    else:</span><br><span class="line">        # 求中值</span><br><span class="line">        mid = (low + high) / 2</span><br><span class="line">        # 求左子数组最大子数组</span><br><span class="line">        left_low, left_high, left_sum = find_max_subarray(A, low, mid)</span><br><span class="line">        # 求右子数组最大子数组</span><br><span class="line">        right_low, right_high, right_sum = find_max_subarray(A, mid + 1, high)</span><br><span class="line">        # 求跨两个子数组的最大子数组</span><br><span class="line">        cross_low, cross_high, cross_sum = find_max_crossing_subarray(A, low, mid, high)</span><br><span class="line">        # 选出最大子数组</span><br><span class="line">        if left_sum &gt;= right_sum and left_sum &gt;= cross_sum:</span><br><span class="line">            return left_low, left_high, left_sum</span><br><span class="line">        elif right_sum &gt;= left_sum and right_sum &gt;= cross_sum:</span><br><span class="line">            return right_low, right_high, right_sum</span><br><span class="line">        elif cross_sum &gt;= left_sum and cross_sum &gt;= right_sum:</span><br><span class="line">            return cross_low, cross_high, cross_sum</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ == &quot;__main__&quot;:</span><br><span class="line">    random_list = [random.randint(-100, 100) for _ in range(100)]</span><br><span class="line">    print random_list</span><br><span class="line">    alow, ahigh, asum = find_max_subarray(random_list, 0, len(random_list) - 1)</span><br><span class="line">    print random_list[alow: ahigh + 1], asum</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://noge.top/2015/03/18/1.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="nuniok">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="码力欧">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2015/03/18/1.html" class="post-title-link" itemprop="url">Python简单web服务</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2015-03-18 00:00:00" itemprop="dateCreated datePublished" datetime="2015-03-18T00:00:00+00:00">2015-03-18</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>利用Python自带的包可以建立简单的web服务器。在DOS里cd到准备做服务器根目录的路径下，输入命令：<br>python -m Web服务器模块 [端口号，默认8000]<br>例如：<br>python -m SimpleHTTPServer 8080<br>然后就可以在浏览器中输入<br><a href="http://localhost:端口号/路径">http://localhost:端口号/路径</a><br>来访问服务器资源。<br>例如：<br><a target="_blank" rel="noopener" href="http://localhost:8080/index.htm%EF%BC%88%E5%BD%93%E7%84%B6index.htm%E6%96%87%E4%BB%B6%E5%BE%97%E8%87%AA%E5%B7%B1%E5%88%9B%E5%BB%BA%EF%BC%89">http://localhost:8080/index.htm（当然index.htm文件得自己创建）</a><br>其他机器也可以通过服务器的IP地址来访问。</p>
<p>这里的“Web服务器模块”有如下三种：</p>
<ul>
<li>BaseHTTPServer: 提供基本的Web服务和处理器类，分别是HTTPServer和BaseHTTPRequestHandler。</li>
<li>SimpleHTTPServer: 包含执行GET和HEAD请求的SimpleHTTPRequestHandler类。</li>
<li>CGIHTTPServer: 包含处理POST请求和执行CGIHTTPRequestHandler类。</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://noge.top/2015/03/08/1.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="nuniok">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="码力欧">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2015/03/08/1.html" class="post-title-link" itemprop="url">常见排序算法Python版</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2015-03-08 00:00:00" itemprop="dateCreated datePublished" datetime="2015-03-08T00:00:00+00:00">2015-03-08</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>平均时间复杂度均为O(n^2)的排序算法：</p>
<h2 id="插入排序"><a href="#插入排序" class="headerlink" title="插入排序"></a>插入排序</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"># -*- coding:utf-8 -*-</span><br><span class="line"># 插入排序，两层遍历，以一个位置为基准，不断向前遍历，将比基准位置大的数调整到基准位置。</span><br><span class="line">def insertion_sort(sort_list):</span><br><span class="line">    iter_len = len(sort_list)</span><br><span class="line">    if iter_len &lt; 2:</span><br><span class="line">        return sort_list</span><br><span class="line">    for i in range(1, iter_len):</span><br><span class="line">        key = sort_list[i]</span><br><span class="line">        j = i - 1</span><br><span class="line">        while j&gt;=0 and sort_list[j]&gt;key:</span><br><span class="line">            sort_list[j+1] = sort_list[j]</span><br><span class="line">            j -= 1</span><br><span class="line">        sort_list[j+1] = key</span><br><span class="line">    return sort_list</span><br><span class="line">if __name__ == &quot;__main__&quot;:</span><br><span class="line">    sort_list = [4,2,7,3,1,9,33,25,46,21,45,22]</span><br><span class="line">    print sort_list</span><br><span class="line">    print insertion_sort(sort_list)</span><br></pre></td></tr></table></figure>


<h2 id="冒泡排序"><a href="#冒泡排序" class="headerlink" title="冒泡排序"></a>冒泡排序</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">def bubble_sort(sort_list):</span><br><span class="line">    iter_len = len(sort_list)</span><br><span class="line">    if iter_len &lt; 2:</span><br><span class="line">        return sort_list</span><br><span class="line">    for i in range(iter_len-1):</span><br><span class="line">        for j in range(iter_len-i-1):</span><br><span class="line">            if sort_list[j] &gt; sort_list[j+1]:</span><br><span class="line">                sort_list[j], sort_list[j+1] = sort_list[j+1], sort_list[j]</span><br><span class="line">    return sort_list</span><br><span class="line">if __name__ == &quot;__main__&quot;:</span><br><span class="line">    sort_list = [4,2,7,3,1,9,33,25,46,21,45,22]</span><br><span class="line">    print sort_list</span><br><span class="line">    print bubble_sort(sort_list)</span><br></pre></td></tr></table></figure>


<h2 id="选择排序"><a href="#选择排序" class="headerlink" title="选择排序"></a>选择排序</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"># -*- coding:utf-8 -*-</span><br><span class="line"># 向后遍历，选择最小值进行交换。</span><br><span class="line">def selection_sort(sort_list):</span><br><span class="line">    iter_len = len(sort_list)</span><br><span class="line">    if iter_len &lt; 2:</span><br><span class="line">        return sort_list</span><br><span class="line">    for i in range(iter_len-1):</span><br><span class="line">        smallest = sort_list[i]</span><br><span class="line">        location = i</span><br><span class="line">        for j in range(i, iter_len):</span><br><span class="line">            if sort_list[j] &lt; smallest:</span><br><span class="line">                smallest = sort_list[j]</span><br><span class="line">                location = j</span><br><span class="line">        if i != location:</span><br><span class="line">            sort_list[i], sort_list[location] = sort_list[location], sort_list[i]</span><br><span class="line">    return sort_list</span><br><span class="line">if __name__ == &quot;__main__&quot;:</span><br><span class="line">    sort_list = [4,2,7,3,1,9,33,25,46,21,45,22]</span><br><span class="line">    print sort_list</span><br><span class="line">    print selection_sort(sort_list)</span><br></pre></td></tr></table></figure>

<h2 id="归并排序"><a href="#归并排序" class="headerlink" title="归并排序"></a>归并排序</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">class Merge_sort(object):</span><br><span class="line">    def _merge(self, alist, p, q, r):</span><br><span class="line">        left = alist[p:q+1]</span><br><span class="line">        right = alist[q+1:r+1]</span><br><span class="line">        for i in range(p, r+1):</span><br><span class="line">            if len(left)&gt;0 and len(right)&gt;0:</span><br><span class="line">                if left[0]&lt;=right[0]:</span><br><span class="line">                    alist[i] = left.pop(0)</span><br><span class="line">                else:</span><br><span class="line">                    alist[i] = right.pop(0)</span><br><span class="line">            elif len(right)==0:</span><br><span class="line">                alist[i] = left.pop(0)</span><br><span class="line">            elif len(left)==0:</span><br><span class="line">                alist[i] = right.pop(0)</span><br><span class="line"> </span><br><span class="line">    def _merge_sort(self, alist, p, r):</span><br><span class="line">        if p&lt;r:</span><br><span class="line">            q = int((p+r)/2)</span><br><span class="line">            self._merge_sort(alist, p, q)</span><br><span class="line">            self._merge_sort(alist, q+1, r)</span><br><span class="line">            self._merge(alist, p, q, r)</span><br><span class="line"> </span><br><span class="line">    def __call__(self, sort_list):</span><br><span class="line">        self._merge_sort(sort_list, 0, len(sort_list)-1)</span><br><span class="line">        return sort_list</span><br><span class="line">if __name__ == &quot;__main__&quot;:</span><br><span class="line">    sort_list = [4,2,7,3,1,9,33,25,46,21,45,22]</span><br><span class="line">    print sort_list</span><br><span class="line">    merge = Merge_sort()</span><br><span class="line">    print merge(sort_list)</span><br></pre></td></tr></table></figure>

<h2 id="堆排序"><a href="#堆排序" class="headerlink" title="堆排序"></a>堆排序</h2><p>堆排序，是建立在数据结构——堆上的。关于堆的基本概念、以及堆的存储方式这里不作介绍。这里用一个列表来存储堆（和用数组存储类似），对于处在i位置的元素，2<em>i+1位置上的是其左孩子，2</em>i+2是其右孩子，类似得可以得出该元素的父元素。<br>首先我们写一个函数，对于某个子树，从根节点开始，如果其值小于子节点的值，就交换其值。用此方法来递归其子树。接着，我们对于堆的所有非叶节点，自下而上调用先前所述的函数，得到一个树，对于每个节点（非叶节点），它都大于其子节点。（其实这是建立最大堆的过程）在完成之后，将列表的头元素和尾元素调换顺序，这样列表的最后一位就是最大的数，接着在对列表的0到n-1部分再调用以上建立最大堆的过程。最后得到堆排序完成的列表。</p>
<h2 id="快速排序"><a href="#快速排序" class="headerlink" title="快速排序"></a>快速排序</h2><p>首先要用到的是分区工具函数（partition），对于给定的列表（数组），我们首先选择基准元素（这里我选择最后一个元素），通过比较，最后使得该元素的位置，使得这个运行结束的新列表（就地运行）所有在基准元素左边的数都小于基准元素，而右边的数都大于它。然后我们对于待排的列表，用分区函数求得位置，将列表分为左右两个列表（理想情况下），然后对其递归调用分区函数，直到子序列的长度小于等于1。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">class Quick_sort(object):</span><br><span class="line">    def _partition(self, alist, p, r):</span><br><span class="line">        i = p-1</span><br><span class="line">        x = alist[r]</span><br><span class="line">        for j in range(p, r):</span><br><span class="line">            if alist[j]&lt;=x:</span><br><span class="line">                i += 1</span><br><span class="line">                alist[i], alist[j] = alist[j], alist[i]</span><br><span class="line">        alist[i+1], alist[r] = alist[r], alist[i+1]</span><br><span class="line">        return i+1</span><br><span class="line"> </span><br><span class="line">    def _quicksort(self, alist, p, r):</span><br><span class="line">        if p&lt;r:</span><br><span class="line">            q = self._partition(alist, p, r)</span><br><span class="line">            self._quicksort(alist, p, q-1)</span><br><span class="line">            self._quicksort(alist, q+1, r)</span><br><span class="line"> </span><br><span class="line">    def __call__(self, sort_list):</span><br><span class="line">        self._quicksort(sort_list, 0, len(sort_list)-1)</span><br><span class="line">        return sort_list</span><br><span class="line">if __name__ == &quot;__main__&quot;:</span><br><span class="line">    sort_list = [4,2,7,3,1,9,33,25,46,21,45,22]</span><br><span class="line">    print sort_list</span><br><span class="line">    quick = Quick_sort()</span><br><span class="line">    print quick(sort_list)</span><br></pre></td></tr></table></figure>

<p>Python对于递归深度做了限制，默认值为1000，可以通过设置修改深度。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import sys</span><br><span class="line">sys.setrecursionlimit(99999)</span><br></pre></td></tr></table></figure>
<p>另外一种是随机化分区函数。由于之前我们的选择都是子序列的最后一个数，因此对于特殊情况的健壮性就差了许多。现在我们随机从子序列选择基准元素，这样可以减少对特殊情况的差错率。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">import random</span><br><span class="line">class Random_quick_sort(object):</span><br><span class="line">    </span><br><span class="line">    def _randomized_partition(self, alist, p, r):</span><br><span class="line">        i = random.randint(p, r)</span><br><span class="line">        alist[i], alist[r] = alist[r], alist[i]</span><br><span class="line">        return self._partition(alist, p, r)</span><br><span class="line">    def _partition(self, alist, p, r):</span><br><span class="line">        i = p-1</span><br><span class="line">        x = alist[r]</span><br><span class="line">        for j in range(p, r):</span><br><span class="line">            if alist[j]&lt;=x:</span><br><span class="line">                i += 1</span><br><span class="line">                alist[i], alist[j] = alist[j], alist[i]</span><br><span class="line">        alist[i+1], alist[r] = alist[r], alist[i+1]</span><br><span class="line">        return i+1</span><br><span class="line">    def _quicksort(self, alist, p, r):</span><br><span class="line">        if p&lt;r:</span><br><span class="line">            q = self._randomized_partition(alist, p, r)</span><br><span class="line">            self._quicksort(alist, p, q-1)</span><br><span class="line">            self._quicksort(alist, q+1, r)</span><br><span class="line"> </span><br><span class="line">    def __call__(self, sort_list):</span><br><span class="line">        self._quicksort(sort_list, 0, len(sort_list)-1)</span><br><span class="line">        return sort_list</span><br><span class="line">if __name__ == &quot;__main__&quot;:</span><br><span class="line">    sort_list = [4,2,7,3,1,9,33,25,46,21,45,22]</span><br><span class="line">    print sort_list</span><br><span class="line">    random_quick = Random_quick_sort()</span><br><span class="line">    print random_quick(sort_list)</span><br></pre></td></tr></table></figure>

<h2 id="Python风格快速排序算法"><a href="#Python风格快速排序算法" class="headerlink" title="Python风格快速排序算法"></a>Python风格快速排序算法</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">def quick_sort_2(sort_list):</span><br><span class="line">    if len(sort_list)&lt;=1:</span><br><span class="line">        return sort_list</span><br><span class="line">    return quick_sort_2([lt for lt in sort_list[1:] if lt&lt;sort_list[0]]) + \</span><br><span class="line">           sort_list[0:1] + \</span><br><span class="line">           quick_sort_2([ge for ge in sort_list[1:] if ge&gt;=sort_list[0]])</span><br><span class="line">if __name__ == &quot;__main__&quot;:</span><br><span class="line">    sort_list = [4,2,7,3,1,9,33,25,46,21,45,22]</span><br><span class="line">    print sort_list</span><br><span class="line">    print quick_sort_2(sort_list)</span><br></pre></td></tr></table></figure>

<h2 id="计数排序"><a href="#计数排序" class="headerlink" title="计数排序"></a>计数排序</h2><p>计数排序的基本思想是对于给定的输入序列中的每一个元素x，确定该序列中值小于x的元素的个数。一旦有了这个信息，就可以将x直接存放到最终的输出序列的正确位置上。例如，如果输入序列中只有17个元素的值小于x的值，则x可以直接存放在输出序列的第18个位置上。当然，如果有多个元素具有相同的值时，我们不能将这些元素放在输出序列的同一个位置上，因此，上述方案还要作适当的修改。<br>假设输入的线性表L的长度为n，L&#x3D;L1,L2,..,Ln；线性表的元素属于有限偏序集S，|S|&#x3D;k且k&#x3D;O(n)，S&#x3D;{S1,S2,..Sk}；则计数排序可以描述如下：<br>1、扫描整个集合S，对每一个Si∈S，找到在线性表L中小于等于Si的元素的个数T(Si)；<br>2、扫描整个线性表L，对L中的每一个元素Li，将Li放在输出线性表的第T(Li)个位置上，并将T(Li)减1。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">class Counting_sort(object):</span><br><span class="line">    def _counting_sort(self, alist, k):</span><br><span class="line">        alist3 = [0 for i in range(k)]</span><br><span class="line">        alist2 = [0 for i in range(len(alist))]</span><br><span class="line">        for j in alist:</span><br><span class="line">            alist3[j] += 1</span><br><span class="line">        for i in range(1, k):</span><br><span class="line">            alist3[i] = alist3[i-1] + alist3[i]</span><br><span class="line">        for l in alist[::-1]:</span><br><span class="line">            alist2[alist3[l]-1] = l</span><br><span class="line">            alist3[l] -= 1</span><br><span class="line">        return alist2</span><br><span class="line"> </span><br><span class="line">    def __call__(self, sort_list, k=None):</span><br><span class="line">        if k is None:</span><br><span class="line">            import heapq</span><br><span class="line">            k = heapq.nlargest(1, sort_list)[0] + 1</span><br><span class="line">        return self._counting_sort(sort_list, k)</span><br><span class="line">if __name__ == &quot;__main__&quot;:</span><br><span class="line">    sort_list = [4,2,7,3,1,9,33,25,46,21,45,22]</span><br><span class="line">    print sort_list</span><br><span class="line">    counting = Counting_sort()</span><br><span class="line">    print counting(sort_list)</span><br></pre></td></tr></table></figure>

<p>排序算法用于研究其思想，具体的应用需要根据实际环境进行修改，但是要遵循以下规则。<br>当需要排序的时候，尽量设法使用内建Python列表的sort方法。<br>当需要搜索的时候，尽量设法使用内建的字典。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://noge.top/2014/10/22/1.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="nuniok">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="码力欧">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2014/10/22/1.html" class="post-title-link" itemprop="url">Python装饰器模式</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2014-10-22 00:00:00" itemprop="dateCreated datePublished" datetime="2014-10-22T00:00:00+00:00">2014-10-22</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>装饰器模式定义：动态地给一个对象添加一些额外的职责。</p>
<p>在 Python 中 Decorator Mode 可以按照像其它编程语言如 C++、Java 等的样子来实现，但是 Python 在应用装饰概念方面的能力上远不止于此， Python 提供了一个语法和一个编程特性来加强这方面的功能。</p>
<p>首先需要了解一下 Python 中闭包的概念：如果在一个内部函数里，对在外部作用域（但不是在全局作用域）的变量进行引用，那么内部函数就被认为是闭包（closure）。</p>
<p><img src="/resource/img/Dec/dec1.png" alt="dec1"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">def makeblod(fn):</span><br><span class="line">    def wrapped():</span><br><span class="line">        return &#x27;&lt;b&gt;&#x27;+fn()+&#x27;&lt;/b&gt;&#x27;</span><br><span class="line">    return wrapped</span><br><span class="line"></span><br><span class="line">def makeitalic(fn):</span><br><span class="line">    def wrapped():</span><br><span class="line">        return &#x27;&lt;i&gt;&#x27;+fn()+&#x27;&lt;/i&gt;&#x27;</span><br><span class="line">    return wrapped</span><br><span class="line"></span><br><span class="line">@makeblod</span><br><span class="line">@makeitalic</span><br><span class="line">def hello():</span><br><span class="line">    return &#x27;hello world&#x27;</span><br><span class="line"></span><br><span class="line">print hello()</span><br></pre></td></tr></table></figure>

<p><img src="/resource/img/Dec/dec2.png" alt="dec2"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">def deco(arg):</span><br><span class="line">    def _deco(func):</span><br><span class="line">        def __deco():</span><br><span class="line">            print &quot;before %s called [%s].&quot; % (func.__name__, arg)</span><br><span class="line">            func()</span><br><span class="line">            print &quot;after %s called [%s].&quot; % (func.__name__, arg)</span><br><span class="line">        return __deco</span><br><span class="line">    return _deco</span><br><span class="line"></span><br><span class="line">@deco(&quot;mymodule&quot;)</span><br><span class="line">def myfunc():</span><br><span class="line">    print &quot;myfunc() called.&quot;</span><br><span class="line">myfunc()</span><br></pre></td></tr></table></figure>

<p>闭包学习：</p>
<p><a target="_blank" rel="noopener" href="http://blog.csdn.net/marty_fu/article/details/7679297">http://blog.csdn.net/marty_fu/article/details/7679297</a></p>
<p>接收参数的装饰器</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">decorator</span>(<span class="params">run_count</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_decorator</span>(<span class="params">fun</span>):</span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">wrapper</span>(<span class="params">*args, **kwargs</span>):</span><br><span class="line">            start = time.time()</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> xrange(run_count):</span><br><span class="line">                fun(*args, **kwargs)</span><br><span class="line">            runtime = time.time() - start</span><br><span class="line">            <span class="built_in">print</span> runtime</span><br><span class="line">        <span class="keyword">return</span> wrapper</span><br><span class="line">    <span class="keyword">return</span> _decorator</span><br><span class="line"></span><br><span class="line"><span class="meta">@decorator(<span class="params"><span class="number">2</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">do_something</span>(<span class="params">name</span>):</span><br><span class="line">    time.sleep(<span class="number">0.1</span>)</span><br><span class="line">    <span class="built_in">print</span> <span class="string">&quot;play game &quot;</span> + name</span><br><span class="line"></span><br><span class="line">do_something(<span class="string">&quot;san guo sha&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>装饰器类</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">decorator</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, count</span>):</span><br><span class="line">        self._count = count</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__call__</span>(<span class="params">self, fun</span>):</span><br><span class="line">        self.fun = fun</span><br><span class="line">        <span class="keyword">return</span> self.call_fun</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">call_fun</span>(<span class="params">self, *args, **kwargs</span>):</span><br><span class="line">        start = time.time()</span><br><span class="line">        <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(self._count):</span><br><span class="line">            self.fun(*args, **kwargs)</span><br><span class="line">        runtime = time.time() - start</span><br><span class="line">        <span class="built_in">print</span> runtime</span><br><span class="line"></span><br><span class="line"><span class="meta">@decorator(<span class="params"><span class="number">2</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">do_something</span>():</span><br><span class="line">    time.sleep(<span class="number">0.1</span>)</span><br><span class="line">    <span class="built_in">print</span> <span class="string">&quot;play game&quot;</span></span><br><span class="line"></span><br><span class="line">do_something()</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/9/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><span class="page-number current">10</span><a class="page-number" href="/page/11/">11</a><a class="extend next" rel="next" href="/page/11/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 2015 – 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">nuniok</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  


  <script class="next-config" data-name="mermaid" type="application/json">{"enable":true,"theme":{"light":"default","dark":"dark"},"js":{"url":"https://cdn.jsdelivr.net/npm/mermaid@8.13.4/dist/mermaid.min.js","integrity":"sha256-96rwDGMWIQYB0yKGp1sKi1yrjrLPj2oT39IpbCsIrsg="}}</script>
  <script src="/js/third-party/tags/mermaid.js"></script>



  




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js","integrity":"sha256-r+3itOMtGGjap0x+10hu6jW/gZCzxHsoKrOd7gyRSGY="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.css" integrity="sha256-AJnUHL7dBv6PGaeyPQJcgQPDjt/Hn/PvYZde1iqfp8U=" crossorigin="anonymous">

<script class="next-config" data-name="gitalk" type="application/json">{"enable":true,"github_id":"nuniok","repo":"nuniok.github.io","client_id":"Ov23liWEs17fH5aYPIzS","client_secret":"6bbfa4b5a042d38b10c942b5c15f4d8a3895e982","admin_user":"nuniok","distraction_free_mode":true,"proxy":"https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token","language":"zh-CN","js":{"url":"https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.min.js","integrity":"sha256-Pmj85ojLaPOWwRtlMJwmezB/Qg8BzvJp5eTzvXaYAfA="},"path_md5":"fd46efe9cca932ba064caf546fedea22"}</script>
<script src="/js/third-party/comments/gitalk.js"></script>

</body>
</html>
