<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)">
<meta name="generator" content="Hexo 7.2.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/resource/img/favicon2018.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/resource/img/favicon2018.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/resource/img/favicon2018.png">
  <link rel="mask-icon" href="/resource/img/favicon2018.png" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"noge.top","root":"/","images":"/images","scheme":"Gemini","darkmode":true,"version":"8.8.2","exturl":false,"sidebar":{"position":"left","display":"hide","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>
<meta property="og:type" content="website">
<meta property="og:title" content="码力欧">
<meta property="og:url" content="https://noge.top/page/7/index.html">
<meta property="og:site_name" content="码力欧">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="nuniok">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://noge.top/page/7/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/7/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>码力欧</title>
  

  <script src="/js/third-party/analytics/baidu-analytics.js"></script>
  <script async src="https://hm.baidu.com/hm.js?9cdc9a11cbd242c6336b07c464d8820c"></script>



  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">码力欧</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">的业余生活</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="home fa-fw"></i>首页</a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="archive fa-fw"></i>归档</a></li>
        <li class="menu-item menu-item-career"><a href="/career/" rel="section"><i class="sitemap fa-fw"></i>├ 技术</a></li>
        <li class="menu-item menu-item-life"><a href="/life/" rel="section"><i class="sitemap fa-fw"></i>├ 生活</a></li>
        <li class="menu-item menu-item-future"><a href="/future/" rel="section"><i class="sitemap fa-fw"></i>└ 未来</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="tags fa-fw"></i>标签</a></li>
        <li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="user fa-fw"></i>关于</a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">nuniok</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">122</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">93</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/noogel" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;noogel" rel="noopener" target="_blank"><i class="github fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:noogel@163.com" title="E-Mail → mailto:noogel@163.com" rel="noopener" target="_blank"><i class="envelope fa-fw"></i></a>
      </span>
  </div>



        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="返回顶部">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="reading-progress-bar"></div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://noge.top/2017/12/27/2.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="nuniok">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="码力欧">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/12/27/2.html" class="post-title-link" itemprop="url">PyCharm越用越好用</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2017-12-27 00:00:00" itemprop="dateCreated datePublished" datetime="2017-12-27T00:00:00+00:00">2017-12-27</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="调试面板"><a href="#调试面板" class="headerlink" title="调试面板"></a>调试面板</h2><p><img src="/resource/img/15143878443336.jpg"></p>
<h2 id="设置文件和代码模板"><a href="#设置文件和代码模板" class="headerlink" title="设置文件和代码模板"></a>设置文件和代码模板</h2><p><img src="/resource/img/15143878611785.jpg"></p>
<p>PyCharm comes with a set of predefined template variables.</p>
<p>The available predefined file template variables are:</p>
<p>${PROJECT_NAME} - the name of the current project.<br>${NAME} - the name of the new file which you specify in the New File dialog box during the file creation.<br>${USER} - the login name of the current user.<br>${DATE} - the current system date.<br>${TIME} - the current system time.<br>${YEAR} - the current year.<br>${MONTH} - the current month.<br>${DAY} - the current day of the month.<br>${HOUR} - the current hour.<br>${MINUTE} - the current minute.<br>${PRODUCT_NAME} - the name of the IDE in which the file will be created.<br>${MONTH_NAME_SHORT} - the first 3 letters of the month name. Example: Jan, Feb, etc.<br>${MONTH_NAME_FULL} - full name of a month. Example: January, February, etc.</p>
<blockquote>
<p>官方文档 <a target="_blank" rel="noopener" href="http://www.jetbrains.com/pycharm/help/creating-and-editing-file-templates.html">http://www.jetbrains.com/pycharm/help/creating-and-editing-file-templates.html</a></p>
</blockquote>
<h2 id="设置字体、字号"><a href="#设置字体、字号" class="headerlink" title="设置字体、字号"></a>设置字体、字号</h2><p><img src="/resource/img/15143879090652.jpg"></p>
<h2 id="设置行号"><a href="#设置行号" class="headerlink" title="设置行号"></a>设置行号</h2><ol>
<li><p>临时设置。右键单击行号处，选择 Show Line Numbers。但是这种方法，只对一个文件有效，并且，重启PyCharm 后消失。<br><img src="/resource/img/15143879346256.jpg"></p>
</li>
<li><p>永久设置。File –&gt; Settings –&gt;Editor –&gt;Appearance , 之后勾选Show Line Numbers。<br><img src="/resource/img/15143879759193.jpg"></p>
</li>
</ol>
<h2 id="开发环境配置"><a href="#开发环境配置" class="headerlink" title="开发环境配置"></a>开发环境配置</h2><ol>
<li><p>配置远程编译器，输入地址、用户名、密码、远程编译器路径，SSH方式连接。<br><img src="/resource/img/15143880088991.jpg"></p>
</li>
<li><p>调试配置。<br><img src="/resource/img/15143880281617.jpg"></p>
</li>
<li><p>配置远程开发环境项目目录。<br><img src="/resource/img/15143880522143.jpg"></p>
</li>
</ol>
<p><img src="/resource/img/15143880587039.jpg"></p>
<ol start="4">
<li>设置自动上传<br><img src="/resource/img/15143880744831.jpg"></li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://noge.top/2017/12/17/1.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="nuniok">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="码力欧">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/12/17/1.html" class="post-title-link" itemprop="url">MySQL一些零散记录</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2017-12-17 00:00:00" itemprop="dateCreated datePublished" datetime="2017-12-17T00:00:00+00:00">2017-12-17</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="MySQL-大小写区分问题"><a href="#MySQL-大小写区分问题" class="headerlink" title="MySQL 大小写区分问题"></a>MySQL 大小写区分问题</h2><p><img src="/resource/img/15135036470309.jpg"></p>
<h2 id="sql-mode-配置"><a href="#sql-mode-配置" class="headerlink" title="sql_mode 配置"></a>sql_mode 配置</h2><p>Modes affect the SQL syntax MySQL supports and the data validation checks it performs. This makes it easier to use MySQL in different environments and to use MySQL together with other database servers.</p>
<h3 id="查看当前sql-mode"><a href="#查看当前sql-mode" class="headerlink" title="查看当前sql_mode"></a>查看当前sql_mode</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT @@GLOBAL.sql_mode;</span><br><span class="line">SELECT @@SESSION.sql_mode;</span><br></pre></td></tr></table></figure>

<h3 id="设置当前sql-mode"><a href="#设置当前sql-mode" class="headerlink" title="设置当前sql_mode"></a>设置当前sql_mode</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SET GLOBAL sql_mode = &#x27;modes...&#x27;;</span><br><span class="line">SET SESSION sql_mode = &#x27;modes...&#x27;;</span><br></pre></td></tr></table></figure>
<h3 id="Full-list-of-SQL-Models"><a href="#Full-list-of-SQL-Models" class="headerlink" title="Full list of SQL Models"></a>Full list of SQL Models</h3><p><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/sql-mode.html">https://dev.mysql.com/doc/refman/5.7/en/sql-mode.html</a></p>
<h2 id="40001-SQL-NO-CACHE"><a href="#40001-SQL-NO-CACHE" class="headerlink" title="&#x2F;*!40001 SQL_NO_CACHE *&#x2F;"></a>&#x2F;*!40001 SQL_NO_CACHE *&#x2F;</h2><p><code>/*!  */</code> 这是 mysql 里的语法，并非注释，<code>!</code> 后面是版本号，如果本数据库等于或大于此版本号，那么注释内的代码也会执行。</p>
<p>关于这个条件的问答： <a target="_blank" rel="noopener" href="https://lists.mysql.com/mysql/203373">https://lists.mysql.com/mysql/203373</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://noge.top/2017/12/17/2.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="nuniok">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="码力欧">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/12/17/2.html" class="post-title-link" itemprop="url">佳软分享</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2017-12-17 00:00:00" itemprop="dateCreated datePublished" datetime="2017-12-17T00:00:00+00:00">2017-12-17</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>这篇文章主要记录可以提高效率和网络使用体验的优秀软件服务。</p>
<h2 id="IFTTT"><a href="#IFTTT" class="headerlink" title="IFTTT"></a>IFTTT</h2><p><img src="/resource/img/15135045482853.jpg"></p>
<p><a target="_blank" rel="noopener" href="https://ifttt.com/">IFTTT</a> 是一个网络自动化神器，目前是免费的，全称为 if this then that 。可以将你各种互联网服务之间的数据同步打通，例如社交、相册、云存储、笔记等等，一个例子是如果你印象笔记保存了一篇文章那么自动发送消息到你的邮箱，或者自动发送短信到指定号码；下雨天提醒你带伞；将你邮件中的附件自动备份到 Dropbox 上等等。</p>
<h2 id="Dropbox"><a href="#Dropbox" class="headerlink" title="Dropbox"></a>Dropbox</h2><p><img src="/resource/img/15135048869688.jpg"></p>
<p><a target="_blank" rel="noopener" href="https://www.dropbox.com/">Dropbox</a> 是一个云存储服务，通过云计算实现因特网上的文件同步，用户可以存储并共享文件和文件夹。它的有点主要感觉安全性上做的比较完善，可以和做内的一些企业云盘比肩，还有提供开放 API 可以给开发人员自由的发挥空间。缺点是在大陆被河蟹，你需要提个优质的 VPN 服务去使用。</p>
<h2 id="MWeb"><a href="#MWeb" class="headerlink" title="MWeb"></a>MWeb</h2><p><img src="/resource/img/15135055881404.jpg"><br><a target="_blank" rel="noopener" href="http://zh.mweb.im/">MWeb</a> 是一款专业的 Markdown 写作、记笔记、静态博客生成软件。是一个个人开发者开发维护的，是 Apple 产品线上的 APP。主要特点是操作界面简单；功能强大，对于静态博客 Hexo、Jekyll 等的支持；方便导出各种格式；静态博客生成。功能比较强大，是目前博主遇到的支持的最好的 Markdown 编辑器。在 APP Store 收费 ￥98，值得这个价格。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://noge.top/2017/12/14/1.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="nuniok">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="码力欧">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/12/14/1.html" class="post-title-link" itemprop="url">MySQL锁优化</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2017-12-14 00:00:00" itemprop="dateCreated datePublished" datetime="2017-12-14T00:00:00+00:00">2017-12-14</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="MySQL-锁表种类"><a href="#MySQL-锁表种类" class="headerlink" title="MySQL 锁表种类"></a>MySQL 锁表种类</h2><p>常见的有行锁和表锁。表锁会锁住整张表，并发能力弱，开发中要避免使用表级锁。行锁只将单行数据锁住，锁数据期间对其它行数据不影响，并发能力高，一般使用行锁来处理并发事务。<br>MySQL是如何加不同类型的锁的？对于加锁数据的筛选条件，有其对应的索引建立，MySQL可以快速定位的数据进行行级加锁；而对于没有索引的情况，MySQL 的做法是会先锁住整张表，然后再去获取数据，然后将不满足条件的数据锁释放掉。</p>
<h2 id="等待锁超时问题"><a href="#等待锁超时问题" class="headerlink" title="等待锁超时问题"></a>等待锁超时问题</h2><p><em>Lock wait timeout exceeded; try restarting transaction</em><br>一种情况是因为有操作语句对整个表加锁了，这里发现的例子是在开启事务做 UPDATE 更新时发现的，UPDATE 条件如果不是主键或者没有索引则会锁整张表，只有以主键为条件或完全匹配的唯一索引做更新才是行级锁。<br>还有就是另一个事务中持有锁时间过长导致。</p>
<pre><code>SELECT * FROM INNODB_TRX;  // 查看事务表锁状态

// 创建事务，更新语句，但是不提交
SET SESSION AUTOCOMMIT=off;
BEGIN;
UPDATE tabl1 SET status=1 WHERE expired_at &lt;123456 AND expired_at &gt;= 12346 AND `status` = 0;
</code></pre>
<p>这时候再去提交则会报等待锁超时问题。</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="http://www.toniz.net/?p=556">http://www.toniz.net/?p=556</a></p>
</blockquote>
<p>加行锁的注意事项：</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="http://blog.csdn.net/u014453898/article/details/56068841">http://blog.csdn.net/u014453898/article/details/56068841</a></p>
</blockquote>
<h2 id="插入语句死锁问题"><a href="#插入语句死锁问题" class="headerlink" title="插入语句死锁问题"></a>插入语句死锁问题</h2><p>在 INSERT 语句中出现 <em>Deadlock found when trying to get lock; try restarting transaction</em> 是因为范围匹配加锁是对索引页加锁了，导致其它事务插入数据时报死锁。处理办法是查询改成行锁，以 ID 或唯一索引加锁。</p>
<blockquote>
<p>这里需要强调的是尽量避免使用范围加锁。最好是通过主键加行锁处理。</p>
</blockquote>
<h2 id="避免加锁失败和发生死锁的注意事项"><a href="#避免加锁失败和发生死锁的注意事项" class="headerlink" title="避免加锁失败和发生死锁的注意事项"></a>避免加锁失败和发生死锁的注意事项</h2><ol>
<li>减少锁占用时间，避免拿锁时做过多耗时操作。</li>
<li>加锁条件需对应加索引，尽量为行级锁。</li>
<li>避免死锁需要再开启事务后一次将所需资源加锁，处理后及时 COMMIT 释放锁。</li>
<li>对于请求的网络资源，首先将所需外部资源准备好。</li>
</ol>
<ul>
<li>对于开启事物后加锁，只有 COMMIT 后方可释放锁</li>
<li>在捕获异常中的处理，在捕获异常后要记得 ROLLBACK</li>
<li>等待锁超时时间一般设置在 1-2 秒时间 <code>SET innodb_lock_wait_timeout=1</code>。</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://noge.top/2017/12/14/2.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="nuniok">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="码力欧">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/12/14/2.html" class="post-title-link" itemprop="url">常用工具命令记录</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2017-12-14 00:00:00" itemprop="dateCreated datePublished" datetime="2017-12-14T00:00:00+00:00">2017-12-14</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="iTerm"><a href="#iTerm" class="headerlink" title="iTerm"></a>iTerm</h2><p>重置配置命令：<br><code>defaults delete com.googlecode.iterm2</code><br>水平分屏：<br><code>command + d</code><br>垂直分屏：<br><code>command + shift + d</code></p>
<h2 id="Tmux"><a href="#Tmux" class="headerlink" title="Tmux"></a>Tmux</h2><p><a target="_blank" rel="noopener" href="https://github.com/gpakosz/.tmux">https://github.com/gpakosz/.tmux</a></p>
<p>新建会话：<code>tmux new -s dev</code><br>连接会话：<code>tmux a -t dev</code><br>列出所有会话：<code>tmux ls</code><br>新建窗口：<code>tmux new -n abc</code><br>prex ： <code>ctrl + b</code><br>切换 pane ： <code>prex + o</code><br>关闭 pane ： <code>prex + x</code><br>新建水平 pane ： <code>prex + &quot;</code><br>新建垂直 pane ： <code>prex + %</code><br>copy-mode ： <code>prex + [</code></p>
<h2 id="Chrome"><a href="#Chrome" class="headerlink" title="Chrome"></a>Chrome</h2><p>刷新页面 ： <code>command + r</code><br>打开关闭控制台 ： <code>command + option + j</code><br>打开最近关闭的页面 ： <code>shift + command + t</code><br>MacOS 局域截屏 ： <code>command + shift + 4</code>
 </p>
<h2 id="PyCharm"><a href="#PyCharm" class="headerlink" title="PyCharm"></a>PyCharm</h2><p>格式化 ： <code>command + option + L</code><br>光标向前 ： <code>command + [</code><br>光标向后 ： <code>command + ]</code><br>上下文对象命名修改 ： <code>Shift + F6</code></p>
<h2 id="Sublime-Text-3"><a href="#Sublime-Text-3" class="headerlink" title="Sublime Text 3"></a>Sublime Text 3</h2><p>选中所有 Command + Ctrl + G</p>
<h2 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h2><p>随机采样命令： <code>shuf -n 100 file.txt</code></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://noge.top/2017/12/14/3.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="nuniok">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="码力欧">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/12/14/3.html" class="post-title-link" itemprop="url">深度学习资料收集</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2017-12-14 00:00:00" itemprop="dateCreated datePublished" datetime="2017-12-14T00:00:00+00:00">2017-12-14</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="百度开源的分布式深度学习平台-PaddlePaddle"><a href="#百度开源的分布式深度学习平台-PaddlePaddle" class="headerlink" title="百度开源的分布式深度学习平台 PaddlePaddle"></a>百度开源的分布式深度学习平台 PaddlePaddle</h2><p>官网 ： <a target="_blank" rel="noopener" href="http://www.paddlepaddle.org/">http://www.paddlepaddle.org/</a></p>
<p>知乎相关问答 ： <a target="_blank" rel="noopener" href="https://www.zhihu.com/question/50185775/answer/119784535">https://www.zhihu.com/question/50185775/answer/119784535</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://noge.top/2017/12/12/1.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="nuniok">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="码力欧">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/12/12/1.html" class="post-title-link" itemprop="url">Python 虚拟环境 virtualenv</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2017-12-12 00:00:00" itemprop="dateCreated datePublished" datetime="2017-12-12T00:00:00+00:00">2017-12-12</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p><code>pip install virtualenv</code></p>
<h2 id="创建虚拟环境"><a href="#创建虚拟环境" class="headerlink" title="创建虚拟环境"></a>创建虚拟环境</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">root@kali:/recall/code# virtualenv test_env</span><br><span class="line">New python executable in test_env/bin/python </span><br><span class="line">Installing setuptools, pip...done.</span><br><span class="line">root@kali:/recall/code#</span><br></pre></td></tr></table></figure>
<p>默认情况下，虚拟环境会依赖系统环境中的site packages，就是说系统中已经安装好的第三方package也会安装在虚拟环境中，<br>如果不想依赖这些package，那么可以加上参数 </p>
<p>–no-site-packages　</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">root@kali:/recall/code# virtualenv test_env --no-site-packages </span><br><span class="line">New python executable in test_env/bin/python </span><br><span class="line">Installing setuptools, pip...done.</span><br><span class="line">root@kali:/recall/code#</span><br></pre></td></tr></table></figure>

<p>或者进入到项目目录：<code>virtualenv .</code>，如果需要指定 Python3 则 <code>virtualenv -p python .</code></p>
<h2 id="启动虚拟环境"><a href="#启动虚拟环境" class="headerlink" title="启动虚拟环境"></a>启动虚拟环境</h2><p>我们先进入到该目录下：<code>cd test_env/</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source bin/activate</span><br></pre></td></tr></table></figure>
<p>启动成功后，会在前面多出 test_env 字样，如下所示</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(test_env)root@kali:/recall/code/test_env#</span><br></pre></td></tr></table></figure>

<h2 id="退出虚拟环境"><a href="#退出虚拟环境" class="headerlink" title="退出虚拟环境"></a>退出虚拟环境</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">deactivate</span><br></pre></td></tr></table></figure>





      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://noge.top/2017/12/06/1.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="nuniok">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="码力欧">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/12/06/1.html" class="post-title-link" itemprop="url">MWeb与HEXO结合写博客</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2017-12-06 00:00:00" itemprop="dateCreated datePublished" datetime="2017-12-06T00:00:00+00:00">2017-12-06</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>今天测试了一把，感觉还不错。</p>
<ol>
<li>拖入图片即所见。</li>
<li>可以边写边展示。</li>
<li>再配合字写的Python处理脚本可以一行命令自动保存发布。</li>
</ol>
<p><img src="/resource/img/1505966065271.jpg" alt="1505966065271"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://noge.top/2017/11/22/1.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="nuniok">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="码力欧">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/11/22/1.html" class="post-title-link" itemprop="url">Ubuntu开发环境配置</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2017-11-22 00:00:00" itemprop="dateCreated datePublished" datetime="2017-11-22T00:00:00+00:00">2017-11-22</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>此博客记录为备份命令：</p>
<h2 id="Node-安装配置"><a href="#Node-安装配置" class="headerlink" title="Node 安装配置"></a>Node 安装配置</h2><p>不要使用 apt-get 带的版本，太旧，自己去官网下载安装，方法如下：</p>
<p>下载并解压 node-v6.9.5-linux-x64.tar.xz</p>
<p><code>tar -xJf node-v6.9.5-linux-x64.tar.xz</code></p>
<p>移到通用的软件安装目录 &#x2F;opt&#x2F;</p>
<p><code>sudo mv node-v6.9.5-linux-x64 /opt/</code></p>
<p>安装 npm 和 node 命令到系统命令</p>
<p><code>sudo ln -s /opt/node-v6.9.5-linux-x64/bin/node /usr/local/bin/node</code></p>
<p><code>sudo ln -s /opt/node-v6.9.5-linux-x64/bin/npm /usr/local/bin/npm</code></p>
<p>验证：</p>
<p><code>node -v</code></p>
<h2 id="ipython-notebook-远程访问"><a href="#ipython-notebook-远程访问" class="headerlink" title="ipython notebook 远程访问"></a>ipython notebook 远程访问</h2><p>创建配置</p>
<p><code>ipython profile create common</code></p>
<p>生成访问密码</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">In [1]: from notebook.auth import passwd</span><br><span class="line">In [2]: passwd()</span><br><span class="line">Enter password:</span><br><span class="line">Verify password:</span><br><span class="line">Out[2]: &#x27;sha1:ce23d945972f:34769685a7ccd3d08c84a18c63968a41f1140274&#x27;</span><br></pre></td></tr></table></figure>

<p>生成证书<br><code>openssl req -x509 -nodes -days 365 -newkey rsa:1024 -keyout common.pem -out common.pem</code></p>
<p>在profile目录下, 编辑ipython_notebook_config.py</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">~/.ipython/profile_common/ipython_notebook_config.py</span><br><span class="line">c = get_config()</span><br><span class="line">c.NotebookApp.certfile=u&#x27;/home/xyz/.ipython/profile_common/common.pem&#x27;</span><br><span class="line">c.NotebookApp.ip=&#x27;*&#x27;</span><br><span class="line">c.NotebookApp.open_browser=False</span><br><span class="line">c.NotebookApp.password=u&#x27;sha1:c5f8fbcb1f9a:bfa8a1879fc2f6bd932a1a4089cbc9775cdcd98e&#x27;</span><br><span class="line">c.NotebookApp.port=1234</span><br></pre></td></tr></table></figure>

<p>启动命令</p>
<p><code>ipython notebook --config=/home/xyz/.ipython/profile_common/ipython_notebook_config.py</code></p>
<h2 id="修改目录权限"><a href="#修改目录权限" class="headerlink" title="修改目录权限"></a>修改目录权限</h2><p><code>sudo chmod -R 775 .</code></p>
<h2 id="Tensorflow-GPU-运行环境安装"><a href="#Tensorflow-GPU-运行环境安装" class="headerlink" title="Tensorflow GPU 运行环境安装"></a>Tensorflow GPU 运行环境安装</h2><p>显卡驱动</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo add-apt-repository ppa:graphics-drivers/ppa</span><br><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install nvidia-384</span><br></pre></td></tr></table></figure>

<p>CUDA 驱动安装</p>
<p><code>sudo ./cuda_8.0.61_375.26_linux.run</code></p>
<p>其中第一个显卡驱动选项不要再安装了</p>
<p>CUDNN 安装</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">tar -xzvf cudnn-8.0-linux-x64-v6.0.tgz</span><br><span class="line">cd cudnn-8.0-linux-x64-v6.0/</span><br><span class="line">sudo cp lib* /usr/local/cuda/lib64/</span><br><span class="line">sudo cp cudnn.h /usr/local/cuda/include/</span><br></pre></td></tr></table></figure>

<p>添加环境变量</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">export PATH=/usr/local/cuda-8.0/bin:$PATH</span><br><span class="line">export PATH=/usr/local/cuda-8.0/lib64:$PATH</span><br><span class="line">export LD_LIBRARY_PATH=/usr/local/cuda-8.0/lib64:$LD_LIBRARY_PATH</span><br></pre></td></tr></table></figure>


<h2 id="查看-NVIDIA-显卡状态"><a href="#查看-NVIDIA-显卡状态" class="headerlink" title="查看 NVIDIA 显卡状态"></a>查看 NVIDIA 显卡状态</h2><p><code>watch -n 1 -d nvidia-smi</code></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://noge.top/2017/11/22/2.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="nuniok">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="码力欧">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/11/22/2.html" class="post-title-link" itemprop="url">深度学习系列第六篇 — 卷基层和池化层展示</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2017-11-22 00:00:00" itemprop="dateCreated datePublished" datetime="2017-11-22T00:00:00+00:00">2017-11-22</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="练习代码"><a href="#练习代码" class="headerlink" title="练习代码"></a>练习代码</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"><span class="keyword">from</span> tensorflow.examples.tutorials.mnist <span class="keyword">import</span> input_data</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> matplotlib.gridspec <span class="keyword">as</span> gridspec</span><br><span class="line"></span><br><span class="line"><span class="comment"># 下载或加载数据</span></span><br><span class="line">mnist = input_data.read_data_sets(<span class="string">&quot;MNIST_data&quot;</span>, one_hot=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">weight_variable</span>(<span class="params">shape</span>):</span><br><span class="line">    inital = tf.truncated_normal(shape, stddev=<span class="number">0.1</span>)</span><br><span class="line">    <span class="keyword">return</span> tf.Variable(inital)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">bias_variable</span>(<span class="params">shape</span>):</span><br><span class="line">    inital = tf.constant(<span class="number">0.1</span>, shape=shape)</span><br><span class="line">    <span class="keyword">return</span> tf.Variable(inital)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">conv2d</span>(<span class="params">x, w</span>):</span><br><span class="line">    <span class="keyword">return</span> tf.nn.conv2d(x, w, strides=[<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>], padding=<span class="string">&#x27;SAME&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">max_pool_2x2</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="keyword">return</span> tf.nn.max_pool(x, ksize=[<span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">1</span>], strides=[<span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">1</span>], padding=<span class="string">&#x27;SAME&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">xs = tf.placeholder(tf.float32, [<span class="literal">None</span>, <span class="number">784</span>])  <span class="comment"># 28 * 28</span></span><br><span class="line">ys = tf.placeholder(tf.float32, [<span class="literal">None</span>, <span class="number">10</span>])</span><br><span class="line">x_image = tf.reshape(xs, [-<span class="number">1</span>, <span class="number">28</span>, <span class="number">28</span>, <span class="number">1</span>])</span><br><span class="line"><span class="comment"># conv1 layer #</span></span><br><span class="line">w_conv1 = weight_variable([<span class="number">5</span>, <span class="number">5</span>, <span class="number">1</span>, <span class="number">32</span>])  <span class="comment"># patch 5 x 5, in size 1, out size 32</span></span><br><span class="line">b_conv1 = bias_variable([<span class="number">32</span>])</span><br><span class="line">h_conv1 = tf.nn.relu(conv2d(x_image, w_conv1) + b_conv1)  <span class="comment"># output size 28 x 28 x 32</span></span><br><span class="line">h_pool1 = max_pool_2x2(h_conv1)  <span class="comment"># output size 14 x 14 x 32</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># conv2 layer #</span></span><br><span class="line">w_conv2 = weight_variable([<span class="number">5</span>, <span class="number">5</span>, <span class="number">32</span>, <span class="number">64</span>])  <span class="comment"># patch 5 x 5, in size 32, out size 64</span></span><br><span class="line">b_conv2 = bias_variable([<span class="number">64</span>])</span><br><span class="line">h_conv2 = tf.nn.relu(conv2d(h_pool1, w_conv2) + b_conv2)  <span class="comment"># output size 14 x 14 x 64</span></span><br><span class="line">h_pool2 = max_pool_2x2(h_conv2)  <span class="comment"># output size 7 x 7 x 64</span></span><br></pre></td></tr></table></figure>

<pre><code>Extracting MNIST_data/train-images-idx3-ubyte.gz
Extracting MNIST_data/train-labels-idx1-ubyte.gz
Extracting MNIST_data/t10k-images-idx3-ubyte.gz
Extracting MNIST_data/t10k-labels-idx1-ubyte.gz
</code></pre>
<h2 id="输出结果"><a href="#输出结果" class="headerlink" title="输出结果"></a>输出结果</h2><p>两层卷基层和两层池化层的处理结果展示出提取出的图像特征</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> tf.Session() <span class="keyword">as</span> sess:</span><br><span class="line">    sess.run(tf.global_variables_initializer())</span><br><span class="line">    batch_xs, batch_ys = mnist.train.next_batch(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    h_conv1_res, h_pool1_res, h_conv2_res, h_pool2_res = \</span><br><span class="line">        sess.run([h_conv1, h_pool1, h_conv2, h_pool2],</span><br><span class="line">                 feed_dict=&#123;xs: batch_xs, ys: batch_ys&#125;)</span><br><span class="line">    </span><br><span class="line">    input_x = batch_xs.reshape([<span class="number">28</span>, <span class="number">28</span>])</span><br><span class="line">    <span class="built_in">print</span> <span class="string">&quot;Show input:&quot;</span></span><br><span class="line">    <span class="built_in">print</span> <span class="string">&quot;input shape:&quot;</span>, input_x.shape</span><br><span class="line">    gs1 = gridspec.GridSpec(<span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">    plt.imshow(input_x)</span><br><span class="line">    plt.show()</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span> <span class="string">&quot;Show first conv2d result:&quot;</span></span><br><span class="line">    <span class="built_in">print</span> <span class="string">&quot;conv2d shape:&quot;</span>, h_conv1_res.shape</span><br><span class="line">    gs1 = gridspec.GridSpec(<span class="number">4</span>, <span class="number">8</span>)</span><br><span class="line">    <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">4</span>):</span><br><span class="line">        <span class="keyword">for</span> y <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">8</span>):</span><br><span class="line">            plt.subplot(gs1[x, y])</span><br><span class="line">            plt.imshow(h_conv1_res[<span class="number">0</span>, :, :, x * <span class="number">4</span> + y])</span><br><span class="line">    plt.show()</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span> <span class="string">&quot;Show first max_pool result:&quot;</span></span><br><span class="line">    <span class="built_in">print</span> <span class="string">&quot;max_pool shape:&quot;</span>, h_pool1_res.shape</span><br><span class="line">    gs1 = gridspec.GridSpec(<span class="number">4</span>, <span class="number">8</span>)</span><br><span class="line">    <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">4</span>):</span><br><span class="line">        <span class="keyword">for</span> y <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">8</span>):</span><br><span class="line">            plt.subplot(gs1[x, y])</span><br><span class="line">            plt.imshow(h_pool1_res[<span class="number">0</span>, :, :, x * <span class="number">4</span> + y])</span><br><span class="line">    plt.show()</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span> <span class="string">&quot;Show second conv2d result:&quot;</span></span><br><span class="line">    <span class="built_in">print</span> <span class="string">&quot;conv2 shape:&quot;</span>, h_conv2_res.shape</span><br><span class="line">    gs1 = gridspec.GridSpec(<span class="number">8</span>, <span class="number">8</span>)</span><br><span class="line">    <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">8</span>):</span><br><span class="line">        <span class="keyword">for</span> y <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">8</span>):</span><br><span class="line">            plt.subplot(gs1[x, y])</span><br><span class="line">            plt.imshow(h_conv2_res[<span class="number">0</span>, :, :, x * <span class="number">8</span> + y])</span><br><span class="line">    plt.show()</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span> <span class="string">&quot;Show second max_pool result:&quot;</span></span><br><span class="line">    <span class="built_in">print</span> <span class="string">&quot;max_pool shape:&quot;</span>, h_pool2_res.shape</span><br><span class="line">    gs1 = gridspec.GridSpec(<span class="number">8</span>, <span class="number">8</span>)</span><br><span class="line">    <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">8</span>):</span><br><span class="line">        <span class="keyword">for</span> y <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">8</span>):</span><br><span class="line">            plt.subplot(gs1[x, y])</span><br><span class="line">            plt.imshow(h_pool2_res[<span class="number">0</span>, :, :, x * <span class="number">8</span> + y])</span><br><span class="line">    plt.show()</span><br></pre></td></tr></table></figure>

<pre><code>Show input:
input shape: (28, 28)
</code></pre>
<p><img src="/resource/img/deep_learning/output_2_1.png" alt="png"></p>
<pre><code>Show first conv2d result:
conv2d shape: (1, 28, 28, 32)
</code></pre>
<p><img src="/resource/img/deep_learning/output_2_3.png" alt="png"></p>
<pre><code>Show first max_pool result:
max_pool shape: (1, 14, 14, 32)
</code></pre>
<p><img src="/resource/img/deep_learning/output_2_5.png" alt="png"></p>
<pre><code>Show second conv2d result:
conv2 shape: (1, 14, 14, 64)
</code></pre>
<p><img src="/resource/img/deep_learning/output_2_7.png" alt="png"></p>
<pre><code>Show second max_pool result:
max_pool shape: (1, 7, 7, 64)
</code></pre>
<p><img src="/resource/img/deep_learning/output_2_9.png" alt="png"></p>
<h2 id="卷基层和池化层的处理"><a href="#卷基层和池化层的处理" class="headerlink" title="卷基层和池化层的处理"></a>卷基层和池化层的处理</h2><p>卷积层部分被称之为过滤器（或者内核）</p>
<p>单位节点矩阵指长和宽都为1，深度不限的节点矩阵。</p>
<p>过滤器处理的矩阵深度和当前层神经网络节点矩阵的深度一致。</p>
<p>过滤器的处理方式如下图：</p>
<p><img src="/resource/img/deep_learning/convolution_schematic.gif" alt="convolution_schematic"></p>
<p>卷基层的参数个数 &#x3D; 过滤器尺寸 × 输入矩阵深度 × 卷基层深度 + 卷基层深度（偏置个数）</p>
<p>池化层处理可以非常有效的缩小矩阵的尺寸，同时可以防止过拟合的问题。池化层的计算通常有两种方式，一种是最大池化层，另一种是取平均值的平均池化层。</p>
<p>池化层处理方式：</p>
<p><img src="/resource/img/deep_learning/pooling_schematic.gif" alt="pooling_schematic"></p>
<h2 id="其它工具用法总结"><a href="#其它工具用法总结" class="headerlink" title="其它工具用法总结"></a>其它工具用法总结</h2><p>matplotlib 图像行内显示： <code>%matplotlib inline</code></p>
<p>通过 PIL 加载图像：<code>Image.open(&#39;img/cnn_sample_test.jpg&#39;)</code></p>
<p>图像转 numpy array： <code>numpy.asarray(img, dtype=&#39;float32&#39;)</code></p>
<p>numpy array 转 PIL 图像： <code>Image.fromarray(img[:, :, :], &#39;RGB&#39;)</code></p>
<p>第一个参数是 array ，第二个参数是图像的模式，灰度图像为 L，彩色图像为 RGB， 灰度图像深度为1，是一个二维矩阵，RGB图像为三层深度的二维矩阵。</p>
<p>PIL 多图像拼接显示：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">gs1 = gridspec.GridSpec(3, 5)</span><br><span class="line">for i in range(3):</span><br><span class="line">    plt.subplot(gs1[i, 0]); plt.axis(&#x27;off&#x27;); plt.imshow(img[:, :, :])</span><br><span class="line">    plt.subplot(gs1[i, 1]); plt.axis(&#x27;off&#x27;); plt.imshow(conv_op[0, :, :, i])</span><br><span class="line">    plt.subplot(gs1[i, 2]); plt.axis(&#x27;off&#x27;); plt.imshow(sigmoid_op[0, :, :, i])</span><br><span class="line">    plt.subplot(gs1[i, 3]); plt.axis(&#x27;off&#x27;); plt.imshow(avg_pool_op[0, :, :, i])</span><br><span class="line">    plt.subplot(gs1[i, 4]); plt.axis(&#x27;off&#x27;); plt.imshow(max_pool_op[0, :, :, i])</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p><code>gridspec.GridSpec(3, 5)</code> 可以理解为将一个画布分成 3 × 5 的方格</p>
<p><code>plt.subplot(gs1[0, 0]); plt.axis(&#39;off&#39;); plt.imshow(img[:, :])</code> 选择第一个画布，将图像填充到这个画布下，并且不显示坐标。</p>
<p>参考资料：</p>
<p><a target="_blank" rel="noopener" href="http://mourafiq.com/2016/08/10/playing-with-convolutions-in-tensorflow.html">http://mourafiq.com/2016/08/10/playing-with-convolutions-in-tensorflow.html</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/6/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><span class="page-number current">7</span><a class="page-number" href="/page/8/">8</a><span class="space">&hellip;</span><a class="page-number" href="/page/13/">13</a><a class="extend next" rel="next" href="/page/8/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 2015 – 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">nuniok</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  


  <script class="next-config" data-name="mermaid" type="application/json">{"enable":true,"theme":{"light":"default","dark":"dark"},"js":{"url":"https://cdn.jsdelivr.net/npm/mermaid@8.13.4/dist/mermaid.min.js","integrity":"sha256-96rwDGMWIQYB0yKGp1sKi1yrjrLPj2oT39IpbCsIrsg="}}</script>
  <script src="/js/third-party/tags/mermaid.js"></script>



  




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js","integrity":"sha256-r+3itOMtGGjap0x+10hu6jW/gZCzxHsoKrOd7gyRSGY="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.css" integrity="sha256-AJnUHL7dBv6PGaeyPQJcgQPDjt/Hn/PvYZde1iqfp8U=" crossorigin="anonymous">

<script class="next-config" data-name="gitalk" type="application/json">{"enable":true,"github_id":"noogel","repo":"noogel.github.io","client_id":"41a4e14aca0b3552334a","client_secret":"ebe0f9bfd24824f3d0d0f41bfd88a8736353759b","admin_user":"noogel","distraction_free_mode":true,"proxy":"https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token","language":"zh-CN","js":{"url":"https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.min.js","integrity":"sha256-Pmj85ojLaPOWwRtlMJwmezB/Qg8BzvJp5eTzvXaYAfA="},"path_md5":"f96e384362e35929e7a2ca2c30b19531"}</script>
<script src="/js/third-party/comments/gitalk.js"></script>

</body>
</html>
